


AdminController.java
package Controllers.Admin;





import javafx.collections.FXCollections;

import javafx.collections.ObservableList;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.chart.PieChart;

import javafx.scene.control.Button;

import javafx.scene.control.Label;

import javafx.scene.control.TableColumn;

import javafx.scene.control.TableView;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.image.Image;

import javafx.scene.layout.AnchorPane;

import javafx.stage.Stage;

import Models.AccountData;

import Models.BookingsModel;

import Models.UsersModel;



import java.io.IOException;

import java.util.ArrayList;

/**

 * @ClassName: AdminController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:37

 * @Version: v1.0

*/

public class AdminController {



    //<editor-fold desc="variables">

    @FXML

    private Button cleanersDashboardButton;

    @FXML

    private Button caterersDashboardButton;

    @FXML

    private Button addAdminButton;

    @FXML

    private Button addRoomButton;

    @FXML

    private AnchorPane fullPane;

    @FXML

    private Label backgroundLabel;

    @FXML

    private Label dbSizeLabel;

    @FXML

    private Label DBOnlineLabel;

    @FXML

    private Label accountLabel;

    @FXML

    private Label headingLabel;

    @FXML

    private Button clearDB;

    @FXML

    private Button reloadButton;

    @FXML

    private PieChart chart;

    @FXML

    private TableView<AccountData> myTable;

    @FXML

    private TableColumn<AccountData, String> IDColumn;

    @FXML

    private TableColumn<AccountData, String> usernameColumn;

    @FXML

    private TableColumn<AccountData, String> firstnameColumn;

    @FXML

    private TableColumn<AccountData, String> lastnameColumn;

    @FXML

    private TableColumn<AccountData, String> passwordColumn;

    @FXML

    private TableColumn<AccountData, String> emailColumn;

    @FXML

    private TableColumn<AccountData, String> accountTypeColumn;

    private ObservableList<AccountData> data;

    private ObservableList pieData;

    int duration = 0;

    //</editor-fold>

    private final BookingsModel bookingsModel = new BookingsModel();

    private final UsersModel usersModel = new UsersModel();



    //Initialises the window, so it will open with the table and pie chart populated

    public void initialize() {

        DBOnlineLabel.setText("DB online");

        setPieData();

        loadCustomerData();

    }



    //This method loads the data onto the pi chart

    public void setPieData() {

            duration = 0;

            pieData = FXCollections.observableArrayList();

            ArrayList<userBookings> ubList = bookingsModel.setPieData();





            //Goes through every single booking we have.

            for (userBookings x : ubList) {

                //To get the bookings we have for today.

                duration = duration + x.getTodayDuration();

                }



            //To get the duration when there are no bookings.



            int free = 7200 - duration;

            pieData = FXCollections.observableArrayList(new PieChart.Data("Bookings", duration),

                    new PieChart.Data("Unoccupied", free));

            //Sets it to null first and then adds the data so that this method can be used when the page is refreshed

            chart.setData(pieData);



    }



    //This method will read the Users table from the database and transfer all the details including their password on to the Tableview

    @FXML

    public void loadCustomerData() {



        this.data = usersModel.loadCustomerData();

        this.IDColumn.setCellValueFactory(new PropertyValueFactory<>("ID"));

        this.usernameColumn.setCellValueFactory(new PropertyValueFactory<>("Username"));

        this.firstnameColumn.setCellValueFactory(new PropertyValueFactory<>("Firstname"));

        this.lastnameColumn.setCellValueFactory(new PropertyValueFactory<>("Lastname"));

        this.passwordColumn.setCellValueFactory(new PropertyValueFactory<>("Password"));

        this.emailColumn.setCellValueFactory(new PropertyValueFactory<>("Email"));

        this.accountTypeColumn.setCellValueFactory(new PropertyValueFactory<>("AccountType"));

        //so that this doubles as a refresh function, i made it so that it removes existing data from the table and then adds them again.

        this.myTable.setItems(null);

        this.myTable.setItems(data);





    }



    //ability to add an admin

    @FXML

    public void addAdmin() {

        try {

            Stage old = (Stage) addAdminButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Admin/adminCreation.fxml").openStream());

            Scene scene = new Scene(root, 400, 400);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Register.css").toExternalForm());

            stage.getIcons().add(new Image("/images/add.png"));

            stage.setScene(scene);

            stage.setTitle("Register admin");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }

    }



    //reloads the page using data from database. calls the initialise method.

    @FXML

    public void refreshPage() {

        initialize();

    }





    //Delete all booking details before today.

    @FXML

    private void clearUpDB(){

        bookingsModel.clearUpDB();



    }



    //<editor-fold desc="methods that open different windows">



    //redirects you back to login

    @FXML

    private void backToLogin() {

        try {

            Stage old = (Stage) fullPane.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Login/LoginFXML.fxml").openStream());

            Scene scene = new Scene(root, 600, 400);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Login.css").toExternalForm());

            stage.getIcons().add(new Image("/images/mainIcon.jpeg"));

            stage.setScene(scene);

            stage.setTitle("Meeting booker login");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }



    //Closes the current window and opens the cleaners dashboard

    @FXML

    private void openCleanersDashboard() {

        try {

            Stage old = (Stage) cleanersDashboardButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Cleaners/Cleaners.fxml").openStream());

            Scene scene = new Scene(root, 640, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Cleaners.css").toExternalForm());

            stage.getIcons().add(new Image("/images/cleaners.png"));

            stage.setScene(scene);

            stage.setTitle("Cleaners Dashboard");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }



    //Closes the current window and opens the caterers dashboard

    @FXML

    private void openCaterersDashboard() {

        try {

            Stage old = (Stage) caterersDashboardButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Caterers/Caterers.fxml").openStream());

            Scene scene = new Scene(root, 640, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Caterers.css").toExternalForm());

            stage.getIcons().add(new Image("/images/caterers.png"));

            stage.setScene(scene);

            stage.setTitle("Caterers Dashboard");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }

    //</editor-fold>

    //Closes the current window and opens the caterers dashboard

    @FXML

    private void addRoom() {

        try {

            Stage old = (Stage)fullPane.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Room/Room.fxml").openStream());

            Scene scene = new Scene(root, 1100, 600);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Room.css").toExternalForm());

            stage.getIcons().add(new Image("/images/booking.png"));

            stage.setScene(scene);

            stage.setTitle("Add Rooming");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }

    //</editor-fold>



}



adminCreation.java
package Controllers.Admin;



/*

This class is almost completely the same os registerController.java in the Register package

 */





import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.*;

import javafx.scene.image.Image;

import javafx.stage.Stage;

import Models.RefreshmentsModel;



import java.io.IOException;

import java.sql.SQLException;

import java.util.regex.Matcher;

import java.util.regex.Pattern;

/**

 * @ClassName: adminCreation

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class adminCreation {



    //<editor-fold desc="variables">

    @FXML

    private Label Heading;

    @FXML

    private Label errorLabel;

    @FXML

    private Label backgroundLabel;

    @FXML

    private Button registerButton;

    @FXML

    private Button cancelButton;

    @FXML

    private TextField usernameField;

    @FXML

    private TextField firstNameField;

    @FXML

    private TextField lastNameField;

    @FXML

    private PasswordField passwordField;

    @FXML

    private TextField emailField;

    //</editor-fold>

    private final RefreshmentsModel refreshmentsModel = new RefreshmentsModel();





    //This will make sure that the required format is entered returning true/false. For this project only verification of email is required.

    public boolean checkFormat() {

        String regex = "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";

        Pattern pattern = Pattern.compile(regex);

        Matcher matcher = pattern.matcher(emailField.getText());

        return matcher.matches();

    }



    //This will take you back to the login page.

    public void backToAdmin() {

        try {

            //We need to get the old stage, so we can close it before we go back to the login page

            Stage old = (Stage) registerButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Admin/Admin.fxml").openStream());

            Scene scene = new Scene(root);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Admin.css").toExternalForm());

            stage.getIcons().add(new Image("/images/admin.png"));

            stage.setScene(scene);

            stage.setTitle("Register Page");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }

    }



    //Same method from the register page but now we have the accountType set as admin

    @FXML

    public void registerUser() throws SQLException {

        try {



            if (usernameField.getText() != null

                    && firstNameField.getText() != null

                    && lastNameField.getText() != null

                    && emailField.getText() != null

                    && passwordField.getText() != null) {

                if (checkFormat()) {

                    if (refreshmentsModel.registerLogic(usernameField.getText(), firstNameField.getText(), lastNameField.getText(), passwordField.getText(), emailField.getText())) {

                        Alert alert = new Alert(Alert.AlertType.INFORMATION);

                        alert.setTitle("Message");

                        alert.setHeaderText(null);

                        alert.setContentText("Account created!");



                        alert.showAndWait().ifPresent((btnType) -> {

                            if (btnType == ButtonType.OK) {

                                backToAdmin();

                            }

                        });

                    }else{

                        errorLabel.setText("Account cannot be created with current details");

                    }



                } else {

                    errorLabel.setText("Invalid email address!");

                }

            }else{

                errorLabel.setText("Missing information!");



            }

        } catch (SQLException e) {

            System.out.println("Error: " + e);

        }

    }

}





userBookings.java
package Controllers.Admin;





import java.time.Duration;

import java.time.LocalDate;

import java.time.LocalTime;

/**

 * @ClassName: userBookings

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class userBookings {

    private int roomID;

    private int userID;

    private String username;

    private LocalTime startTime;

    private LocalTime endTime;

    private LocalDate startDate;

    private LocalDate endDate;

    private String resources;

    private String refreshments;

    private String refreshmentsTime;



    public userBookings(int roomID, int userID, String username, LocalTime startTime, LocalTime endTime, LocalDate startDate, LocalDate endDate, String resources) {

        this.roomID = roomID;

        this.userID = userID;

        this.username = username;

        this.startTime = startTime;

        this.endTime = endTime;

        this.startDate = startDate;

        this.endDate = endDate;

        this.resources = resources;

    }



    public userBookings(int roomID, int userID, LocalTime startTime, LocalDate startDate) {

        this.roomID = roomID;

        this.userID = userID;

        this.startTime = startTime;

        this.startDate = startDate;

    }



    public userBookings(int roomID, int userID, String username, LocalTime startTime, LocalTime endTime, LocalDate startDate, LocalDate endDate, String resources, String refreshments, String refreshmentsTime) {

        this.roomID = roomID;

        this.userID = userID;

        this.username = username;

        this.startTime = startTime;

        this.endTime = endTime;

        this.startDate = startDate;

        this.endDate = endDate;

        this.resources = resources;

        this.refreshments = refreshments;

        this.refreshmentsTime = refreshmentsTime;

    }



    public int getTodayDuration(){

        LocalDate today = LocalDate.now();

        if(this.startDate.equals(today)){

            return getDuration();

        }

        return 0;

    }

    public int getDuration(){

        if(this.getStartDate().equals(this.getEndDate())){

            return (int) Duration.between(this.getStartTime(), this.getEndTime()).toMinutes();

        }else{

            //If the booking is over many days, we need to see how many hours they have booked for total, maximum booking time allowed is 24 hours, so they cannot pass 2 days.

            LocalTime end = LocalTime.of(0, 0, 0);

            int endDuration = (int)Duration.between(end, this.getEndTime()).toMinutes();

            int startDuration = (int)Duration.between(this.getStartTime(), end).toMinutes();

            return startDuration + endDuration;

        }

    }



    //<editor-fold desc="set-get">

    public String getRefreshments() {

        return refreshments;

    }



    public void setRefreshments(String refreshments) {

        this.refreshments = refreshments;

    }



    public String getRefreshmentsTime() {

        return refreshmentsTime;

    }



    public void setRefreshmentsTime(String refreshmentsTime) {

        this.refreshmentsTime = refreshmentsTime;

    }



    public int getRoomID() {

        return roomID;

    }



    public void setRoomID(int roomID) {

        this.roomID = roomID;

    }



    public int getUserID() {

        return userID;

    }



    public void setUserID(int userID) {

        this.userID = userID;

    }



    public String getUsername() {

        return username;

    }



    public void setUsername(String username) {

        this.username = username;

    }



    public LocalTime getStartTime() {

        return startTime;

    }



    public void setStartTime(LocalTime startTime) {

        this.startTime = startTime;

    }



    public LocalTime getEndTime() {

        return endTime;

    }



    public void setEndTime(LocalTime endTime) {

        this.endTime = endTime;

    }



    public LocalDate getStartDate() {

        return startDate;

    }



    public void setStartDate(LocalDate startDate) {

        this.startDate = startDate;

    }



    public LocalDate getEndDate() {

        return endDate;

    }



    public void setEndDate(LocalDate endDate) {

        this.endDate = endDate;

    }



    public String getResources() {

        return resources;

    }



    public void setResources(String resources) {

        this.resources = resources;

    }

    //</editor-fold>

}



CaterersController.java
package Controllers.Caterers;



import javafx.collections.FXCollections;

import javafx.collections.ObservableList;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.*;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.image.Image;

import javafx.stage.Stage;

import Models.CatererModel;

import Models.RefreshmentsModel;



import java.io.IOException;

import java.sql.PreparedStatement;

import java.sql.ResultSet;

import java.sql.SQLException;

import java.time.LocalDate;

/**

 * @ClassName: CaterersController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class CaterersController {



    @FXML

    private Label headingLabel;

    @FXML

    private Button backButton;

    @FXML

    private DatePicker datePicker;

    @FXML

    private TableView<CatererModel> myTable;

    @FXML

    private TableColumn<CatererModel, String> roomIDColumn;

    @FXML

    private TableColumn<CatererModel, String> timeColumn;

    @FXML

    private TableColumn<CatererModel, String> refreshmentColumn;

    private final RefreshmentsModel refreshmentsModel = new RefreshmentsModel();



    public void initialize() throws SQLException {

        initializeDatePicker();

        loadTable();



    }



    private void initializeDatePicker(){

        LocalDate today = LocalDate.now();

        datePicker.setValue(today);



        datePicker.valueProperty().addListener((ov, oldValue, newValue) -> {

            try {

                loadTable();

            } catch (SQLException e) {

                e.printStackTrace();

            }

        });

    }



    private void loadTable() throws SQLException {

        PreparedStatement ps = null;

        ResultSet rs = null;

        try{

            ObservableList<CatererModel> data = FXCollections.observableArrayList();

            String date = datePicker.getValue().toString();

            data=refreshmentsModel.loadTable(date);



            roomIDColumn.setCellValueFactory(new PropertyValueFactory<>("roomID"));

            timeColumn.setCellValueFactory(new PropertyValueFactory<>("time"));

            refreshmentColumn.setCellValueFactory(new PropertyValueFactory<>("refreshment"));



            myTable.setItems(null);

            myTable.setItems(data);



            //Here i was going to make sure i close the connection by calling the method ps and rs .close() but for now it doesn't really matter



        }catch(Exception e){

            e.printStackTrace();

        }

    }





    //This will take us back to the admin dashboard

    @FXML

    public void returnToAdmin() {

        try {

            Stage old = (Stage) this.backButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Admin/Admin.fxml").openStream());

            Scene scene = new Scene(root, 1280, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Admin.css").toExternalForm());

            stage.getIcons().add(new Image("/images/admin.png"));

            stage.setScene(scene);

            stage.setTitle("Admin Dashboard");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }

}



CleanersController.java
package Controllers.Cleaners;



import javafx.collections.FXCollections;

import javafx.collections.ObservableList;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.Button;

import javafx.scene.control.DatePicker;

import javafx.scene.control.TableColumn;

import javafx.scene.control.TableView;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.image.Image;

import javafx.stage.Stage;

import Models.BookingsModel;



import java.io.IOException;

import java.sql.SQLException;

import java.time.LocalDate;



/**

 * @ClassName: CleanersController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class CleanersController {

    @FXML

    private Button backButton;

    @FXML

    private DatePicker datePicker;

    @FXML

    private TableView<CleaningSlot> myTable;

    @FXML

    private TableColumn<CleaningSlot, String> roomIDColumn;

    @FXML

    private TableColumn<CleaningSlot, String> startTimeColumn;

    @FXML

    private TableColumn<CleaningSlot, String> endTimeColumn;

    private ObservableList<CleaningSlot> data;

    private final BookingsModel bookingsModel = new BookingsModel();



    public void initialize() throws SQLException {

        initializeDatePicker();

        loadTable();



    }



    //This method will set default date to current date and will add a listener to the datePicker so that the table can update

    //automatically when we change the selected date instead of having a button for it.

    private void initializeDatePicker() {

        LocalDate today = LocalDate.now();

        datePicker.setValue(today);



        datePicker.valueProperty().addListener((ov, oldValue, newValue) -> {

            try {

                loadTable();

            } catch (SQLException e) {

                e.printStackTrace();

            }

        });



    }





    //This will load the data onto the table for the selected date

    @FXML

    private void loadTable() throws SQLException {

        try {

            data = FXCollections.observableArrayList();

            String date = datePicker.getValue().toString();

            data = bookingsModel.loadTable(date);



        } catch (Exception e) {

            e.printStackTrace();

        }

        this.roomIDColumn.setCellValueFactory(new PropertyValueFactory<>("roomID"));

        this.startTimeColumn.setCellValueFactory(new PropertyValueFactory<>("startTime"));

        this.endTimeColumn.setCellValueFactory(new PropertyValueFactory<>("endTime"));

        //this will make sure that the data doesn't just get added onto the table as we check different dates

        //but will display the times for each day only

        this.myTable.setItems(null);

        this.myTable.setItems(data);



    }





    //This will take us back to the admin panel

    @FXML

    public void returnToAdmin() {

        try {

            Stage old = (Stage) this.backButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Admin/Admin.fxml").openStream());

            Scene scene = new Scene(root, 1280, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Admin.css").toExternalForm());

            stage.getIcons().add(new Image("/images/admin.png"));

            stage.setScene(scene);

            stage.setTitle("Admin Dashboard");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }



}



CleaningSlot.java
package Controllers.Cleaners;



//I wanted to quickly make a class for the table view in CleanersController

/**

 * @ClassName: CleaningSlot

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class CleaningSlot {

    private final String roomID;

    private final String startTime;

    private final String endTime;



    public CleaningSlot(String roomID, String startTime, String endTime) {

        this.roomID = (roomID);

        this.startTime = (startTime);

        this.endTime = (endTime);

    }



    @Override

    public String toString(){

        return this.roomID + " "+ this.startTime + " " + this.endTime;

    }



    public String getRoomID() {

        return roomID;

    }



    public String getStartTime() {

        return startTime;

    }



    public String getEndTime() {

        return endTime;

    }

}



CustomerBooking.java
package Controllers.Customer;

/**

 * @ClassName: CustomerBooking

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:39

 * @Version: v1.0

*/

public class CustomerBooking {

    private int roomID;

    private String timePeriod;

    private String dates;

    private int duration;

    private String equipment;

    private String refreshments;

    private String refreshmentsTime;



    public CustomerBooking(int roomID, String timePeriod, String dates, int duration, String equipment, String refreshments, String refreshmentsTime) {

        this.roomID = roomID;

        this.timePeriod = timePeriod;

        this.dates = dates;

        this.duration = duration;

        this.equipment = equipment;

        this.refreshments = refreshments;

        this.refreshmentsTime = refreshmentsTime;

    }



    //<editor-fold desc="set-get">

    public int getRoomID() {

        return roomID;

    }



    public void setRoomID(int roomID) {

        this.roomID = roomID;

    }



    public String getTimePeriod() {

        return timePeriod;

    }



    public void setTimePeriod(String timePeriod) {

        this.timePeriod = timePeriod;

    }



    public String getDates() {

        return dates;

    }



    public void setDates(String dates) {

        this.dates = dates;

    }



    public int getDuration() {

        return duration;

    }



    public void setDuration(int duration) {

        this.duration = duration;

    }



    public String getEquipment() {

        return equipment;

    }



    public void setEquipment(String equipment) {

        this.equipment = equipment;

    }



    public String getRefreshments() {

        return refreshments;

    }



    public void setRefreshments(String refreshments) {

        this.refreshments = refreshments;

    }



    public String getRefreshmentsTime() {

        return refreshmentsTime;

    }



    public void setRefreshmentsTime(String refreshmentsTime) {

        this.refreshmentsTime = refreshmentsTime;

    }

    //</editor-fold>

}



CustomerController.java
package Controllers.Customer;







import Controllers.Admin.userBookings;

import Controllers.Login.LoginController;

import javafx.collections.ObservableList;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.Button;

import javafx.scene.control.Label;

import javafx.scene.control.TableColumn;

import javafx.scene.control.TableView;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.image.Image;

import javafx.stage.Stage;

import Models.BookingsModel;



import java.io.IOException;



/**

 * @ClassName: CustomerController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class CustomerController {



    //<editor-fold desc="variables">

    @FXML

    private Label currentBookingsLabel;

    @FXML

    private Label welcomeLabel;

    @FXML

    private Button backButton;

    @FXML

    private Button newBookingButton;

    @FXML

    private TableView<userBookings> myTable;

    @FXML

    private TableColumn<userBookings, Integer> roomIDColumn;

    @FXML

    private TableColumn<userBookings, String> startTimeColumn;

    @FXML

    private TableColumn<userBookings, String> endTimeColumn;

    @FXML

    private TableColumn<userBookings, String> startDateColumn;

//    @FXML for multi day bookings

//    private TableColumn<userBookings, String> endDateColumn;

    @FXML

    private TableColumn<userBookings, String> resourcesColumn;

    @FXML

    private TableColumn<userBookings, String> refreshmentsColumn;

    @FXML

    private TableColumn<userBookings, String> refreshmentsTimeColumn;



    private ObservableList<userBookings> data;

    private final BookingsModel bookingsModel = new BookingsModel();

    //</editor-fold>



    public void initialize(){

        welcomeLabel.setText("Welcome back " + LoginController.currentUser.getFirstname());

        loadBookingData();

    }



    //Sets tableView

    public void loadBookingData() {

        data=bookingsModel.loadBookingData();



        this.roomIDColumn.setCellValueFactory(new PropertyValueFactory<>("roomID"));

        this.startTimeColumn.setCellValueFactory(new PropertyValueFactory<>("startTime"));

        this.endTimeColumn.setCellValueFactory(new PropertyValueFactory<>("endTime"));

        this.startDateColumn.setCellValueFactory(new PropertyValueFactory<>("startDate"));

        //to be used if multi day bookings are implemented

//        this.endDateColumn.setCellValueFactory(new PropertyValueFactory<>("endDate"));

        this.resourcesColumn.setCellValueFactory(new PropertyValueFactory<>("resources"));

        this.refreshmentsColumn.setCellValueFactory(new PropertyValueFactory<>("refreshments"));

        this.refreshmentsTimeColumn.setCellValueFactory(new PropertyValueFactory<>("refreshmentsTime"));

        //so that this doubles as a refresh function, i made it so that it removes existing data from the table and then adds them again.

        this.myTable.setItems(null);

        this.myTable.setItems(data);



    }



    //This will get the selected item from the table view and delete it

    @FXML

    public void deleteBooking(){

        bookingsModel.deleteBooking(myTable.getSelectionModel().getSelectedItem().getRoomID(),String.valueOf(myTable.getSelectionModel().getSelectedItem().getStartTime()),String.valueOf(myTable.getSelectionModel().getSelectedItem().getStartDate()));

        myTable.getItems().remove(myTable.getSelectionModel().getSelectedItem());

    }



    @FXML

    private void newBooking(){

        try {

            Stage old = (Stage)newBookingButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/RoomBooker/RoomBooker.fxml").openStream());

            Scene scene = new Scene(root, 720, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/RoomBooker.css").toExternalForm());

            stage.getIcons().add(new Image("/images/booking.png"));

            stage.setScene(scene);

            stage.setTitle("Add Booking");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }

    }



    @FXML

    public void backToLogin(){

        try {

            Stage old = (Stage) backButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Login/LoginFXML.fxml").openStream());

            Scene scene = new Scene(root, 600, 400);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Login.css").toExternalForm());

            stage.getIcons().add(new Image("/images/mainIcon.jpeg"));

            stage.setScene(scene);

            stage.setTitle("Meeting booker login");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }

    }

}



Login.java
package Controllers.Login;



import javafx.application.Application;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.image.Image;

import javafx.stage.Stage;

/**

 * @ClassName: Login

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class Login extends Application {



    public void start(Stage primaryStage)throws Exception{

        Parent root = (Parent) FXMLLoader.load(getClass().getResource("../../Views/Login/LoginFXML.fxml"));

        Scene scene =  new Scene(root, 600, 400);

        scene.getStylesheets().add(getClass().getResource("/Stylesheets/Login.css").toExternalForm());

        primaryStage.getIcons().add(new Image("/images/mainIcon.jpeg"));

        primaryStage.setScene(scene);

        primaryStage.setTitle("Conference reservation system By:qiaofenglin");

        primaryStage.setResizable(false);

        primaryStage.show();

    }



    public static void main(String[] args) {



        launch(args);

    }



}



LoginController.java
package Controllers.Login;



import Utils.MD5Utils;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.fxml.Initializable;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.*;

import javafx.scene.image.Image;

import javafx.scene.image.ImageView;

import javafx.stage.Stage;

import Models.UsersModel;



import java.io.IOException;

import java.net.URL;

import java.util.ResourceBundle;

/**

 * @ClassName: LoginController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class LoginController implements Initializable {



    //<editor-fold desc="variables">

    //This stores the information of the current user

    public static User currentUser;

    //creates a LoginModel

    private final UsersModel usersModel = new UsersModel();

    //If any variable are not used in the methods, then are probably are used for styling in the stylesheet (Login.css) which is in the stylesheet folder

    @FXML

    private Label connectionLabel;

    @FXML

    private Label credentialsLabel;

    @FXML

    private Label meetingBookerLabel;

    @FXML

    private Label backgroundLabel;

    @FXML

    private ImageView background;

    @FXML

    private Button loginButton;

    @FXML

    private Button registerButton;

    @FXML

    private TextField usernameField;

    @FXML

    private PasswordField passwordField;

    @FXML

    private ComboBox<String> accountType;

    //</editor-fold>





//Initialize method the tells us whether if successfully connected to the database or not

    public void initialize(URL url, ResourceBundle rb) {

        if (this.usersModel.isConnected()) {

            connectionLabel.setText("Connected to DB");

        } else{

            connectionLabel.setText("DB offline");

        }

        accountType.getItems().addAll("Admin", "Customer");

        Image image = new Image("/images/login.png");

        background = new ImageView(image);

        background.setFitHeight(200);

        background.setFitWidth(600);

        //background.setPreserveRatio(true);

        backgroundLabel.setGraphic(background);

    }







    //This method will take the inputs from the fields, verify that they are correct and will take them to their respective window, based on their account type

    @FXML

    public void login() {

        try {

            //this if statement uses the loginModel object created in the beginning of this class and uses the isLogin method.

            if (this.usersModel.isLogin(this.usernameField.getText(), MD5Utils.stringToMD5(this.passwordField.getText()), accountType.getValue())) {

                //This deletes the current stage (the current stage needs to be reached from the button) and opens the new stage

                Stage stage = (Stage) this.loginButton.getScene().getWindow();

                stage.close();

                switch (accountType.getValue()) {

                    case "Admin":

                        adminLogin(currentUser);

                        break;

                    case "Customer":

                        customerLogin(currentUser);

                        break;

                }

            } else {

                credentialsLabel.setText("Invalid log in!");

            }

        } catch (Exception ignored) {

        }

    }



    //<editor-fold desc="methods to open other windows">

    //Launches the admin dashboard, the related files are in the Admin package

    public void adminLogin(User currentUser) {

        try {

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Admin/Admin.fxml").openStream());

            Scene scene = new Scene(root, 1280, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Admin.css").toExternalForm());

            stage.getIcons().add(new Image("/images/admin.png"));

            stage.setScene(scene);

            stage.setTitle("Admin Dashboard");

            stage.setResizable(false);

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }



    //Launches the customer dashboard, the related files are in the Customer package

    public void customerLogin(User currentUser) {

        try {

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Customer/Customer.fxml").openStream());

            Scene scene = new Scene(root, 900, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Customer.css").toExternalForm());

            stage.getIcons().add(new Image("/images/customer.png"));

            stage.setScene(scene);

            stage.setTitle("Customer Dashboard");

            stage.setResizable(false);

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }



    //Launches the registration page to create a new User

    public void registerUser(){

        try {

            //We need to get the old stage, so we can close it before we open the Register page

            Stage old = (Stage)registerButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Register/Register.fxml").openStream());

            Scene scene = new Scene(root, 400, 400);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Register.css").toExternalForm());

            stage.getIcons().add(new Image("/images/add.png"));

            stage.setScene(scene);

            stage.setTitle("Register Page");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }

    //</editor-fold>



}



User.java
package Controllers.Login;



/**

 * @ClassName: User

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

//This objected has been created to pass the user info into different windows.

public class User {



    private final int userID;

    private final String firstname;

    private final String lastname;

    private final String email;

    private String username;









    public User(int userID, String firstname, String lastname, String email,String username) {

        this.userID = userID;

        this.firstname = firstname;

        this.lastname = lastname;

        this.email = email;

        this.username = username;

    }



    public int getUserID() {

        return userID;

    }







    public String getFirstname() {

        return firstname;

    }



    public String getLastname() {

        return lastname;

    }



    public String getEmail() {

        return email;

    }



    public String getUsername(){

        return username;

    }

}



RegisterController.java
package Controllers.Register;



import Utils.MD5Utils;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.*;

import javafx.stage.Stage;

import Models.UsersModel;



import java.io.IOException;

import java.sql.SQLException;

import java.util.regex.Matcher;

import java.util.regex.Pattern;

/**

 * @ClassName: RegisterController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class RegisterController {



    //<editor-fold desc="variables">

    @FXML

    private Label Heading;

    @FXML

    private Label errorLabel;

    @FXML

    private Label backgroundLabel;

    @FXML

    private Button registerButton;

    @FXML

    private Button cancelButton;

    @FXML

    private TextField usernameField;

    @FXML

    private TextField firstNameField;

    @FXML

    private TextField lastNameField;

    @FXML

    private PasswordField passwordField;

    @FXML

    private PasswordField verifyPasswordField;

    @FXML

    private TextField emailField;

    private final UsersModel usersModel = new UsersModel();

    //</editor-fold>



    //This will take the following as parameters to add their details into the database. The ID column will be automatically incremented

    public boolean registerLogic(String Username, String Firstname, String Lastname, String Password, String Email) throws SQLException {

        Password=MD5Utils.stringToMD5(Password);

        return usersModel.registerLogic( Username,  Firstname,  Lastname,  Password,  Email);

    }



    //This will make sure that the required format is entered returning true/false. For this project only verification of email is required.

    public boolean checkFormat() {

        String regex = "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";

        Pattern pattern = Pattern.compile(regex);

        Matcher matcher = pattern.matcher(emailField.getText());

        return matcher.matches();

    }



    //This will take you back to the login page.

    public void backToLogin() {

        try {

            //We need to get the old stage, so we can close it before we go back to the login page

            Stage old = (Stage) registerButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Login/LoginFXML.fxml").openStream());

            Scene scene = new Scene(root);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Login.css").toExternalForm());

            stage.setScene(scene);

            stage.setTitle("Register Page");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }

    }



    @FXML

    public void registerUser() throws SQLException {

        try {



            if (!usernameField.getText().isEmpty()

                    && !firstNameField.getText().isEmpty()

                    && !lastNameField.getText().isEmpty()

                    && !emailField.getText().isEmpty()

                    && !passwordField.getText().isEmpty()

                    && !verifyPasswordField.getText().isEmpty()) {

                if (checkFormat()) {

                    if (passwordField.getText().equals(verifyPasswordField.getText())) {

                        if (registerLogic(usernameField.getText(), firstNameField.getText(), lastNameField.getText(), passwordField.getText(), emailField.getText())) {

                            Alert alert = new Alert(Alert.AlertType.INFORMATION);

                            alert.setTitle("Message");

                            alert.setHeaderText(null);

                            alert.setContentText("Account created!");



                            alert.showAndWait().ifPresent((btnType) -> {

                                if (btnType == ButtonType.OK) {

                                    backToLogin();

                                }

                            });

                        }else{

                            errorLabel.setText("Account cannot be created with current details");

                        }

                    } else {

                        errorLabel.setText("Passwords do not match!");

                    }



                } else {

                    errorLabel.setText("Invalid email address!");

                }

            }else{

                errorLabel.setText("Missing information!");



            }

        } catch (SQLException e) {

            System.out.println("Error: " + e);

        }

    }

}



RoomController.java
package Controllers.Room;









import Models.RoomData;

import Models.RoomModel;



import javafx.collections.ObservableList;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.*;



import javafx.scene.control.Button;

import javafx.scene.control.Label;

import javafx.scene.control.TextArea;

import javafx.scene.control.TextField;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.image.Image;

import javafx.scene.image.ImageView;

import javafx.scene.layout.AnchorPane;

import javafx.stage.FileChooser;

import javafx.stage.Stage;



import java.awt.*;

import java.io.File;



import java.io.IOException;

import java.nio.file.Files;

import java.sql.*;

import java.util.Random;



/**

 * @ClassName: RoomController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 9:03

 * @Version: v1.0

*/

public class RoomController {



    //<editor-fold desc="variables">

    @FXML

    private Label backgroundLabel;

    @FXML

    private Label tableLabel;

    @FXML

    private Label errorLabel;

    @FXML

    private Label infoLabel;

    @FXML

    private Button refreshButton;

    @FXML

    private Button bookButton;

    @FXML

    private Button backButton;

    @FXML

    private TextField resourcesTextField;

    @FXML

    private DatePicker datePicker;

    @FXML

    private TextField nameText;

    @FXML

    private TextField numberText;

    @FXML

    private TextArea discribeText;

    @FXML

    private ImageView roomImg;



    @FXML

    private AnchorPane fullPane;





    @FXML

    private Spinner<Integer> roomSelector;

    private String img;

    private final Desktop desktop = Desktop.getDesktop();

    private final RoomModel roomModel = new RoomModel();

    //</editor-fold>

    @FXML

    private TableView<RoomData> myTable;

    @FXML

    private TableColumn<RoomData, String> IDColumn;

    @FXML

    private TableColumn<RoomData, String> nameColumn;

    @FXML

    private TableColumn<RoomData, String> numberColumn;

    @FXML

    private TableColumn<RoomData, String> pictureColumn;

    @FXML

    private TableColumn<RoomData, String> descriptionColumn;

    private ObservableList<RoomData> data;





    public void initialize() throws SQLException {

        roomImg.setImage(new Image("/images/img.png"));

        loadCustomerData();



    }

/**

 * @Description: loadCustomerData

 * @param: []

 * @return: void

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 8:55

 */

    public void loadCustomerData(){

        this.data = roomModel.loadCustomerData();

        if( null !=this.data) {

            this.IDColumn.setCellValueFactory(new PropertyValueFactory<>("id"));

            this.nameColumn.setCellValueFactory(new PropertyValueFactory<>("name"));

            this.numberColumn.setCellValueFactory(new PropertyValueFactory<>("number"));

            this.pictureColumn.setCellValueFactory(new PropertyValueFactory<>("picture"));

            this.descriptionColumn.setCellValueFactory(new PropertyValueFactory<>("description"));

            //so that this doubles as a refresh function, i made it so that it removes existing data from the table and then adds them again.

            this.myTable.setItems(null);

            this.myTable.setItems(data);

        }



    }



    //This will return use to the customer dashboard.

    @FXML

    private void backToDashboard() {

        try {

            Stage old = (Stage)fullPane.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Admin/Admin.fxml").openStream());

            Scene scene = new Scene(root, 1280, 720);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Admin.css").toExternalForm());

            stage.getIcons().add(new Image("/images/admin.png"));

            stage.setScene(scene);

            stage.setTitle("Admin Dashboard");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }





    @FXML

    private void addRoom() {

        final FileChooser fileChooser = new FileChooser();//FileChooser

        fileChooser.getExtensionFilters().addAll(

                new FileChooser.ExtensionFilter("All FILE", "*.png")

        );



        Stage stage=(Stage)fullPane.getScene().getWindow();

        File file = fileChooser.showOpenDialog(stage);



        if (file != null) {

            try {

                String basePath=getClass().getResource("../../").getPath().replaceFirst("/","");

                File file1=new File(basePath+"Upload/");

                if (!file1.exists()){

                    file1.mkdirs();

                }

                Random r = new Random();

                String  s=String.valueOf(System.currentTimeMillis());

                String fpath=basePath+"Upload/"+s+".png";

                Files.copy(file.toPath(), new File(fpath).toPath());

                img="/Upload/"+s+".png";

                roomImg.setImage(new Image(img));



            }catch (Exception e){

                System.out.println(e);

            }

        }

    }

    public void doAddRoom(){

        RoomData roomData=new RoomData();

        roomData.setName(nameText.getText());

        roomData.setDescription(discribeText.getText());

        roomData.setNumber(numberText.getText());

        roomData.setPicture(img);

        roomModel.insert(roomData);

        errorLabel.setText("commit success");

        loadCustomerData();



    }

    /**

     * @Description: deleteRoom

     * @param: []

     * @return: void

     */

    public void deleteRoom(){

        RoomData roomData=new RoomData();

        roomData.setId(myTable.getSelectionModel().getSelectedItem().getId());

        roomModel.delete(roomData);

        loadCustomerData();



    }

    public void onclick(){

        if( null!= myTable.getSelectionModel().getSelectedItem()) {

            nameText.setText(myTable.getSelectionModel().getSelectedItem().getName());

            numberText.setText(myTable.getSelectionModel().getSelectedItem().getNumber());

            discribeText.setText(myTable.getSelectionModel().getSelectedItem().getDescription());

            System.out.println(myTable.getSelectionModel().getSelectedItem().getPicture());

            roomImg.setImage(new Image(myTable.getSelectionModel().getSelectedItem().getPicture()));

        }



    }



    

}



Refreshment.java
package Controllers.RoomBooker;



import java.time.LocalDate;

import java.time.LocalTime;

/**

 * @ClassName: Refreshment

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class Refreshment {

    private int RoomID;

    private LocalDate date;

    private LocalTime time;

    private String refreshment;



    public Refreshment(int roomID, LocalDate date, LocalTime time, String refreshment) {

        RoomID = roomID;

        this.date = date;

        this.time = time;

        this.refreshment = refreshment;

    }



    public Refreshment(int roomID, String date, String time, String refreshment) {

        RoomID = roomID;

        this.date = LocalDate.parse(date);

        this.time = LocalTime.parse(time);

        this.refreshment = refreshment;

    }



    //<editor-fold desc="set-get">

    public int getRoomID() {

        return RoomID;

    }



    public void setRoomID(int roomID) {

        RoomID = roomID;

    }



    public LocalDate getDate() {

        return date;

    }



    public void setDate(LocalDate date) {

        this.date = date;

    }



    public LocalTime getTime() {

        return time;

    }



    public void setTime(LocalTime time) {

        this.time = time;

    }



    public String getRefreshment() {

        return refreshment;

    }



    public void setRefreshment(String refreshment) {

        this.refreshment = refreshment;

    }

    //</editor-fold>

}



RoomBookerController.java
package Controllers.RoomBooker;







import Models.RoomData;

import Models.RoomModel;

import javafx.beans.value.ChangeListener;

import javafx.collections.FXCollections;

import javafx.collections.ObservableList;

import javafx.fxml.FXML;

import javafx.fxml.FXMLLoader;

import javafx.scene.Parent;

import javafx.scene.Scene;

import javafx.scene.control.*;

import javafx.scene.control.cell.PropertyValueFactory;

import javafx.scene.image.Image;

import javafx.stage.Stage;

import Models.BookingsModel;



import java.io.IOException;

import java.sql.*;

import java.time.LocalDate;

import java.time.LocalTime;

import java.util.ArrayList;

/**

 * @ClassName: RoomBookerController

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class RoomBookerController {



    //<editor-fold desc="variables">

    @FXML

    private Label backgroundLabel;

    @FXML

    private Label tableLabel;

    @FXML

    private Label errorLabel;

    @FXML

    private Label infoLabel;

    @FXML

    private Button refreshButton;

    @FXML

    private Button bookButton;

    @FXML

    private Button backButton;

    @FXML

    private TextField resourcesTextField;

    @FXML

    private ComboBox startTimeHour;

    @FXML

    private ComboBox startTimeMin;

    @FXML

    private ComboBox endTimeHour;

    @FXML

    private ComboBox endTimeMin;

    @FXML

    private ComboBox numberBox;

    @FXML

    private DatePicker datePicker;

    @FXML

    private TextField refreshmentsTimeBox;

    @FXML

    private TextArea roomDescriptionBox;

    @FXML

    private TextArea refreshmentsArea;

    @FXML

    private TableView<TimeSlot> myTable;

    @FXML

    private TableColumn<TimeSlot, String> startTimeColumn;

    @FXML

    private TableColumn<TimeSlot, String> endTimeColumn;

    private final RoomModel roomModel = new RoomModel();

    private int roomId;



    private ArrayList<TimeSlot> bookedTimeSlots = new ArrayList<>();

    private final BookingsModel bookingsModel = new BookingsModel();

    //</editor-fold>



    public void initialize() throws SQLException {

        LocalDate today = LocalDate.now();

        datePicker.setValue(today);

        infoLabel.setWrapText(true);

        initializeComboBox();

        initializeSpinner();

        setDateBounds();

        setTableView();



    }



    //This will adds a listener to the spinner that will be used to change the description of the room they have selected.

    public void initializeSpinner() {

        ObservableList<String> rooms = FXCollections.observableArrayList();



        ObservableList<RoomData> roomData=roomModel.loadCustomerData();

        for (RoomData data:roomData){

            rooms.add(String.valueOf(data.getId()));

        }



        numberBox.getItems().addAll(rooms);

        numberBox.valueProperty().addListener((ChangeListener<String>) (observable, oldValue, newValue) -> {

            errorLabel.setText("");

            infoLabel.setText("");

            this.roomId=Integer.valueOf(newValue);

            for (RoomData data:roomData){

                System.out.println(String.valueOf(data.getId()));

               if( String.valueOf(data.getId()).equals(newValue)){

                   roomDescriptionBox.setText(data.getDescription());

               };

            }





            setTableView();



        });

    }



    //This will add the time options into the respective combo boxes

    public void initializeComboBox() {

        ObservableList<String> startHourOptions = FXCollections.observableArrayList("00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21");

        ObservableList<String> endHourOptions = FXCollections.observableArrayList("00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22");

        startTimeHour.getItems().addAll(startHourOptions);

        endTimeHour.getItems().addAll(endHourOptions);

        ObservableList<String> minuteOptions = FXCollections.observableArrayList("00", "30");

        startTimeMin.getItems().addAll(minuteOptions);

        endTimeMin.getItems().addAll(minuteOptions);



    }



    //This sets it so that you can't book on days that have already passed

    public void setDateBounds() {

        LocalDate minDate = LocalDate.now();

        datePicker.setDayCellFactory(d ->

                new DateCell() {

                    @Override

                    public void updateItem(LocalDate item, boolean empty) {

                        super.updateItem(item, empty);

                        setDisable(item.isBefore(minDate));

                    }

                });

    }



    //This code does nothing but display the free times for the date selected in 30 minute intervals and adds them to the list view

    @FXML

    public void setTableView()  {

        try {

            ArrayList<TimeSlot> out = bookingsModel.setTableView(datePicker.getValue(), this.roomId);



            this.bookedTimeSlots = bookedTimeSlots; // This list will later be used to verify if the user has booked when the room is free or not



            ObservableList<TimeSlot> data = FXCollections.observableArrayList(out);



            startTimeColumn.setCellValueFactory(new PropertyValueFactory<>("startTime"));

            endTimeColumn.setCellValueFactory(new PropertyValueFactory<>("endTime"));



            myTable.setItems(null);

            myTable.setItems(data);



        } catch (Exception e) {

            errorLabel.setText(e.toString());



        }



    }



    //This will validate all details, compare them for any conflicts before finally booking the room

    @FXML

    private void bookRoom() throws SQLException {

        if (verifyFields()) {

            if (checkBookings()) {

                //here

                if (checkDouble()) {

                    if (checkRefreshments()) {

                        //Even after checking for overlapping bookings, we need to make sure that the cleaners are free at this time and can clean the room before the next booking

                        if (roomCleaned()) {

                            if (addBooking()) {

                                Alert alert = new Alert(Alert.AlertType.INFORMATION);

                                alert.setTitle("Message");

                                alert.setHeaderText(null);

                                alert.setContentText("Booking created!");



                                alert.showAndWait().ifPresent((btnType) -> {

                                    if (btnType == ButtonType.OK) {

                                        backToDashboard();

                                    }

                                });

                            } else {

                                infoLabel.setText("Note that we need to clean the rooms once you are done\n" +

                                        "Therefore some booking me be unavailable depending on\n" +

                                        "our cleaners!");

                            }

                        } else {

                            errorLabel.setText("Error with cleaners");

                        }

                    } else {

                        errorLabel.setText("Time selected for refreshments is unfortunately busy");

                        infoLabel.setText("Please make sure that the refreshments times are within selected time frame!");

                    }

                    //here

                } else {

                    errorLabel.setText("Error");

                    infoLabel.setText("User cannot make bookings in 2 rooms at the same time!");

                }

            } else {

                errorLabel.setText("Room busy at given time!");

            }



        } else {

            errorLabel.setText("Field verification error!");

        }



    }



    //This will take our details and add it to the Bookings table in our database

    private boolean addBooking()  {



        String st = startTimeHour.getValue() + ":" + startTimeMin.getValue();

        String et = endTimeHour.getValue() + ":" + endTimeMin.getValue();

        try {

            bookingsModel.addBooking(st, et, this.roomId, datePicker.getValue().toString(), resourcesTextField.getText(), refreshmentsArea.getText(), refreshmentsTimeBox.getText());

            errorLabel.setText("");

            return true;

        } catch (Exception e) {

            System.out.println("Error: " + e);

            return false;

        }

    }



    //This method will check for any overlapping bookings from the already booked slots to the time slots we requested

    public boolean checkBookings() {

        LocalTime selectedST = LocalTime.parse(startTimeHour.getValue() + ":" + startTimeMin.getValue());

        LocalTime selectedET = LocalTime.parse(endTimeHour.getValue() + ":" + endTimeMin.getValue());



        ArrayList<TimeSlot> requestingTS = TimeSlot.returnTimeSlots(selectedST, TimeSlot.getSlotNumber(selectedST, selectedET));



        //this.bookedTimeSlots is set data in the table view method

        for (TimeSlot bs : this.bookedTimeSlots) {

            for (TimeSlot rs : requestingTS) {

                if (rs.exists(bs)) {

                    return false;

                }

            }

        }



        return true;

    }



    public boolean verifyFields() {

        if (verifyFieldsNull()) {

            return verifyBookTimes();

        }

        return false;

    }



    //This will make sure that the user has entered valid values into the fields, this is different from checking for double bookings.(Where a room is booked for 2 people at the same time.)

    private boolean verifyFieldsNull() {

        try {



            /*

            The next block of code has multiple nested if statements, and its confusing to read so I've explained it here

            It checks whether all the fields are null, except resources field, refreshments and refreshments time field. That is the reason

            you can see "else return true" if refreshments area is null; If it is not null I need to make sure they enter a time that i need to deliver it at.

            They need to mention the time for each refreshments, e.g if they ask for 2 refreshments i require 2 refreshment time values.

            All the other else statements just add text to the error label the user know where they have gone wrong.

             */



            //Checks datePicker

            if (datePicker.getValue() != null) {

                //This will check if something has been selected in the time combo boxes

                if (startTimeHour.getValue() != null && startTimeMin.getValue() != null && endTimeHour.getValue() != null && endTimeMin.getValue() != null) {



                    if (!refreshmentsArea.getText().isEmpty() && !refreshmentsTimeBox.getText().isEmpty()) {

                        String[] refreshments = refreshmentsArea.getText().split("[,] ", 0);

                        String[] refreshmentTimes = refreshmentsTimeBox.getText().split("[,] ", 0);

                        for (String x : refreshmentTimes) {

                            LocalTime.parse(x);

                        }

                        if (refreshments.length == refreshmentTimes.length) {

                            errorLabel.setText("");

                            return true;

                        } else {

                            errorLabel.setText("Specify time for each refreshment");

                        }

                    } else if (refreshmentsArea.getText().isEmpty() && refreshmentsTimeBox.getText().isEmpty()) {

                        errorLabel.setText("");

                        return true;

                    } else {

                        errorLabel.setText("Enter both refreshment fields");

                    }

                } else {

                    errorLabel.setText("Select time");

                }

            } else {

                errorLabel.setText("Date cannot be empty!");

            }



            return false;



        } catch (Exception e) {

            errorLabel.setText("Invalid details");

            return false;

        }

    }



    //This will take the values entered by the user and compares to the database to see if there are any clashes with other bookings.

    private boolean verifyBookTimes() {

        try {

            String x = startTimeHour.getValue() + ":" + startTimeMin.getValue();

            LocalTime st = LocalTime.parse(x);

            x = endTimeHour.getValue() + ":" + endTimeMin.getValue();

            LocalTime et = LocalTime.parse(x);



            int timeCompare = st.compareTo(et);



            if (timeCompare == 0) {

                errorLabel.setText("End time cannot be start time");

            } else if (timeCompare == 1) {

                errorLabel.setText("End time cannot be before start time");

            } else if (endTimeHour.getValue().equals("22") && endTimeMin.getValue().equals("30")) {

                errorLabel.setText("End time out of bounds!");

            } else if (timeCompare == -1) {

                errorLabel.setText("");

                return true;

            }

            return false;



        } catch (Exception e) {

            errorLabel.setText("Error entering time");

            return false;

        }

    }



    //This method will make sure that the caterers are free to deliver the refreshments for the selected time.

    private boolean checkRefreshments() throws SQLException {



        if (refreshmentsTimeBox.getText().isEmpty()) {

            errorLabel.setText("");

            return true;

        }



        String[] refreshmentsTimes = refreshmentsTimeBox.getText().split("[,] ", 0);





        ArrayList<LocalTime> results = bookingsModel.checkRefreshments(this.roomId, datePicker.getValue().toString());





        for (String x : refreshmentsTimes) {

            for (LocalTime existingRTS : results) {

                LocalTime rts = LocalTime.parse(x);

                if (rts.compareTo(existingRTS) == 0) {

                    return false;

                }

            }

        }



        //To make sure that the time they give is actually withing the booked time;

        for (String x : refreshmentsTimes) {

            LocalTime st = LocalTime.parse(startTimeHour.getValue() + ":" + startTimeMin.getValue());

            LocalTime et = LocalTime.parse(endTimeHour.getValue() + ":" + endTimeMin.getValue());

            LocalTime rt = LocalTime.parse(x);



            boolean condition1 = rt.isAfter(st);

            boolean condition2 = rt.isBefore(et);



            if (condition1 && condition2) {

                errorLabel.setText("");

                return addRefreshment();

            }

        }



        return false;



    }



    public boolean addRefreshment() throws SQLException {

        String[] refreshments = refreshmentsArea.getText().split("[,] ", 0);

        String[] refreshmentTimes = refreshmentsTimeBox.getText().split("[,] ", 0);

        if(bookingsModel.addRefreshment(refreshments,refreshmentTimes,this.roomId,datePicker.getValue().toString())){

            errorLabel.setText("");

            return true;

        }else{

            errorLabel.setText("Error adding refreshment details");

            return false;

        }



    }



    //This will return use to the customer dashboard.

    @FXML

    private void backToDashboard() {

        try {

            //We need to get the old stage, so we can close it before we go back to the login page

            Stage old = (Stage) backButton.getScene().getWindow();

            Stage stage = new Stage();

            FXMLLoader loader = new FXMLLoader();

            Parent root = loader.load(getClass().getResource("../../Views/Customer/Customer.fxml").openStream());

            Scene scene = new Scene(root);

            scene.getStylesheets().add(getClass().getResource("/Stylesheets/Customer.css").toExternalForm());

            stage.getIcons().add(new Image("/images/customer.png"));

            stage.setScene(scene);

            stage.setTitle("Customer Dashboard");

            stage.setResizable(false);

            old.close();

            stage.show();

        } catch (IOException e) {

            e.printStackTrace();

        }



    }



    private boolean checkDouble() throws SQLException {

        String date = datePicker.getValue().toString();

        LocalTime startTime = LocalTime.parse(startTimeHour.getValue() + ":" + startTimeMin.getValue());

        LocalTime endTime = LocalTime.parse(endTimeHour.getValue() + ":" + endTimeMin.getValue());

        return bookingsModel.checkDouble(date, startTime, endTime);



    }

    /*

    To make sure that the rooms are always cleaned before someone books them we can do 2 things :

    1. Make sure the room is cleaned before someone books the room

    2.Clean the room after the end time and before someone else books the room

    For this project I'm going to implement a simple system where it checks whether the room can be cleaned

    either right after the endTime or right before the next booking of that room.

     */



    public boolean roomCleaned() throws SQLException {

        String et = endTimeHour.getValue() + ":" + endTimeMin.getValue();

        //CleaningModel cleaner = new CleaningModel(et, datePicker.getValue());

        String date = datePicker.getValue().toString();

        bookingsModel.getCleanerTimes(date);



        if (bookingsModel.isBooked(et)) {

            int roomID = this.roomId;



            //Cleaner is booked, and we will try to see if the cleaner is busy even before the next room booking

            if (bookingsModel.getNextBooking(date,LocalTime.parse(et)) != null) {

                bookingsModel.addCleanerBooking(roomID, (bookingsModel.getNextBooking(date,LocalTime.parse(et))), datePicker.getValue());

                return true;

            } else {

                return false;

            }

        } else {

            //Cleaner is not booked, so we can add a cleaner booking for this time.

            return bookingsModel.addCleanerBooking(this.roomId, LocalTime.parse(et), datePicker.getValue());

        }

    }



    //bad coding as its over 500 lines :/

}



TimeSlot.java
package Controllers.RoomBooker;



import java.time.LocalTime;

import java.time.temporal.ChronoUnit;

import java.util.ArrayList;

/**

 * @ClassName: TimeSlot

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 10:38

 * @Version: v1.0

*/

public class TimeSlot {



    private LocalTime startTime;

    private LocalTime endTime;



    public TimeSlot(String startTime, String endTime){

        this.startTime = LocalTime.parse(startTime);

        this.endTime = LocalTime.parse(endTime);

    }



    //Although this method is not is use a the moment, it will be useful if i want to display the available time slots instead of the booked timeslots in RoomBooker

    public static ArrayList<TimeSlot> createTimeSlots()

    {

        ArrayList<TimeSlot> tempArr = new ArrayList<>();



        for(int x=0; x<22; x++){

            for(int y = 0; y <2; y++){

                if(x<10){

                    if(y%2 == 0){

                        if((x+1) == 10){

                            tempArr.add(new TimeSlot("0"+x+":00", "0" + x +":30"));

                        }else{

                            tempArr.add(new TimeSlot("0"+x+":00", "0"+x+":30"));

                        }



                    }else{

                        if((x+1) == 10){

                            tempArr.add(new TimeSlot("0"+x+":30", "10:00"));

                        }else{

                            tempArr.add(new TimeSlot("0"+x+":30", "0"+(x+1)+":00"));

                        }

                    }

                }else{

                    if(y%2 == 0){

                        tempArr.add(new TimeSlot(x+":00", x+":30"));

                    }else{

                        tempArr.add(new TimeSlot(x+":30", (x+1)+":00"));

                    }

                }

            }

        }



        return tempArr;

    }



    //This will create int slot number of 30 min timeslots from startTime

    public static ArrayList<TimeSlot> returnTimeSlots(LocalTime startTime, int slots)

    {

        ArrayList<TimeSlot> temp = new ArrayList<>();

        LocalTime endTime;

        for(int x = 0; x<slots; x++){

            endTime = startTime.plus(30, ChronoUnit.MINUTES);

            temp.add(new TimeSlot(startTime.toString(), endTime.toString()));

            startTime = startTime.plus(30, ChronoUnit.MINUTES);

        }

        return temp;

    }



    //This method will return the number of 30 minute slots between the given st and et

    public static int getSlotNumber(LocalTime st, LocalTime et)

    {

        long timeDifference = st.until(et, ChronoUnit.MINUTES);

        return (int)timeDifference/30 ;

    }



    //This method will compare the given timeslot object to every object in given arrayList

    public static boolean listContains(TimeSlot ts, ArrayList<TimeSlot> list){

        for(TimeSlot x: list){

            if(x.exists(ts)){

                return true;

            }

        }

        return false;

    }



    //This will compare the current timeslot and object to ts and check whether both objects hold the same values.

    public boolean exists(TimeSlot ts)

    {

        return (startTime.equals(ts.getStartTime())) && (endTime.equals(ts.getEndTime()));

    }



    //<editor-fold desc="get-set and toString method">

    public LocalTime getStartTime() {

        return startTime;

    }



    public void setStartTime(LocalTime startTime) {

        this.startTime = startTime;

    }



    public LocalTime getEndTime() {

        return endTime;

    }



    public void setEndTime(LocalTime endTime) {

        this.endTime = endTime;

    }



    @Override

    public String toString() {

        return startTime+" to "+endTime;

    }

    //</editor-fold>



}



DBConnect.java
package Dao;



import java.sql.Connection;

import java.sql.DriverManager;

import java.sql.SQLException;



/**

 * @ClassName: DBConnect

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/4/17 9:25

 * @Version: v1.0

 */

public class DBConnect  {

    private static String url = "jdbc:mysql://127.0.0.1:3306/510project";

    private static String username = "root";

    private static String password = "Kk1314258";

    private static DBConnect instance = new DBConnect(url,username,password);

    protected Connection connection;











    public static DBConnect getInstance() {

        return instance;

    }

/**

 * @Description: DBConnect

 * @param: []

 * @return: 

 */

    private  DBConnect(String url, String username, String password) {



        try {

            connection = DriverManager.getConnection(url, username, password);

        } catch (SQLException e) {

            System.out.println("Error creating connection to database: " + e);

            System.exit(-1);

        }



    }

/**

 * @Description: getConnection

 * @param: []

 * @return: java.sql.Connection

 */

    public Connection getConnection() {

        try {

            if (connection.isClosed()) {

                try {

                    connection = DriverManager.getConnection(url, username, password);

                } catch (SQLException e) {

                    System.out.println("Error creating connection to database: " + e);

                    System.exit(-1);

                }

            }

        }catch (SQLException e){

            System.out.println("Error creating connection to database: " + e);

            System.exit(-1);

        }

        return connection;

    }



}



AccountData.java
package Models;



import javafx.beans.property.SimpleStringProperty;

import javafx.beans.property.StringProperty;



public class AccountData {

    private final StringProperty ID;

    private final StringProperty username;

    private final StringProperty firstname;

    private final StringProperty lastname;

    private final StringProperty email;

    private final StringProperty password;

    private final StringProperty accountType;



    public AccountData(String ID, String username, String firstname, String lastname, String password, String email, String accountType) {

        this.ID = new SimpleStringProperty(ID);

        this.username = new SimpleStringProperty(username);

        this.firstname = new SimpleStringProperty(firstname);

        this.lastname = new SimpleStringProperty(lastname);

        this.email = new SimpleStringProperty(email);

        this.password = new SimpleStringProperty(password);

        this.accountType = new SimpleStringProperty(accountType);

    }



    //<editor-fold desc="set-get">

    public String getID() {

        return ID.get();

    }



    public StringProperty IDProperty() {

        return ID;

    }



    public void setID(String ID) {

        this.ID.set(ID);

    }



    public String getUsername() {

        return username.get();

    }



    public StringProperty usernameProperty() {

        return username;

    }



    public void setUsername(String username) {

        this.username.set(username);

    }



    public String getFirstname() {

        return firstname.get();

    }



    public StringProperty firstnameProperty() {

        return firstname;

    }



    public void setFirstname(String firstname) {

        this.firstname.set(firstname);

    }



    public String getLastname() {

        return lastname.get();

    }



    public StringProperty lastnameProperty() {

        return lastname;

    }



    public void setLastname(String lastname) {

        this.lastname.set(lastname);

    }



    public String getEmail() {

        return email.get();

    }



    public StringProperty emailProperty() {

        return email;

    }



    public void setEmail(String email) {

        this.email.set(email);

    }



    public String getPassword() {

        return password.get();

    }



    public StringProperty passwordProperty() {

        return password;

    }



    public void setPassword(String password) {

        this.password.set(password);

    }



    public String getAccountType() {

        return accountType.get();

    }



    public StringProperty accountTypeProperty() {

        return accountType;

    }



    public void setAccountType(String accountType) {

        this.accountType.set(accountType);

    }

    //</editor-fold>

}



BaseModel.java
package Models;







import Dao.DBConnect;



import java.sql.Connection;

import java.sql.Statement;



/**

 * @ClassName: BaseModel

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/4/30 10:18

 * @Version: v1.0

 */

public class BaseModel {

    private DBConnect db;

    Statement stmt = null;



    public BaseModel() {

        db = DBConnect.getInstance();

    }



    //This will tell use whether the connection was established or not

    public boolean isConnected(){

        try{

            Connection con = db.getConnection();

            if(con != null){

                return true;

            }else{

                return false;

            }



        }catch(Exception e){

            e.printStackTrace();

            return false;

        }

    }



}



BookingsModel.java
package Models;







import Controllers.Admin.userBookings;

import Controllers.Cleaners.CleaningSlot;

import Controllers.Login.LoginController;

import Controllers.RoomBooker.TimeSlot;

import Dao.DBConnect;

import javafx.collections.FXCollections;

import javafx.collections.ObservableList;



import java.sql.*;

import java.time.LocalDate;

import java.time.LocalTime;

import java.time.temporal.ChronoUnit;

import java.util.ArrayList;



public class BookingsModel {



    private long roomId;

    private long userId;

    private String username;

    private String startTime;

    private String endTime;

    private String startDate;

    private String endDate;

    private String resources;

    private String refreshments;

    private String refreshmentsTime;

    private ArrayList<userBookings> bookedTimes = new ArrayList<>();



    private DBConnect db;

    Statement stmt = null;



    public long getRoomId() {

        return roomId;

    }



    public void setRoomId(long roomId) {

        this.roomId = roomId;

    }





    public long getUserId() {

        return userId;

    }



    public void setUserId(long userId) {

        this.userId = userId;

    }





    public String getUsername() {

        return username;

    }



    public void setUsername(String username) {

        this.username = username;

    }





    public String getStartTime() {

        return startTime;

    }



    public void setStartTime(String startTime) {

        this.startTime = startTime;

    }





    public String getEndTime() {

        return endTime;

    }



    public void setEndTime(String endTime) {

        this.endTime = endTime;

    }





    public String getStartDate() {

        return startDate;

    }



    public void setStartDate(String startDate) {

        this.startDate = startDate;

    }





    public String getEndDate() {

        return endDate;

    }



    public void setEndDate(String endDate) {

        this.endDate = endDate;

    }





    public String getResources() {

        return resources;

    }



    public void setResources(String resources) {

        this.resources = resources;

    }





    public String getRefreshments() {

        return refreshments;

    }



    public void setRefreshments(String refreshments) {

        this.refreshments = refreshments;

    }





    public String getRefreshmentsTime() {

        return refreshmentsTime;

    }



    public void setRefreshmentsTime(String refreshmentsTime) {

        this.refreshmentsTime = refreshmentsTime;

    }



    public BookingsModel() {

        db = DBConnect.getInstance();

    }



    //This method loads the data onto the pi chart

    public ArrayList<userBookings> setPieData() {

        ArrayList<userBookings> ubList = new ArrayList<>();

        try {



            String sql = "SELECT * FROM Bookings";

            Connection con = db.getConnection();



            ResultSet rs = con.createStatement().executeQuery(sql);



            //Creates a new userBookings object while going through the table Bookings

            while (rs.next()) {

                userBookings ub = new userBookings(rs.getInt(1), rs.getInt(2), rs.getString(3), LocalTime.parse(rs.getString(4)), LocalTime.parse(rs.getString(5)),

                        LocalDate.parse(rs.getString(6)), LocalDate.parse(rs.getString(7)), rs.getString(8));

                ubList.add(ub);

            }

        } catch (SQLException e) {

            System.err.println("Error: " + e);

        }

        return ubList;

    }





    public void clearUpDB(){

        try {

            //removes old data from bookings table

            String sql = "DELETE FROM Bookings WHERE EndDate <=  DATE_SUB(CURDATE(),INTERVAL -1 DAY)";

            Connection con = db.getConnection();

            assert con != null;

            con.createStatement().execute(sql);

        }catch(SQLException e){

            System.out.println("Error: " + e);

        }



    }







    public ObservableList<CleaningSlot>  loadTable(String date) throws SQLException {

        ObservableList<CleaningSlot> data=FXCollections.observableArrayList();;

        try{



            String sql = "SELECT * FROM Bookings WHERE UserID = ? AND StartDate = ?";

            Connection con = db.getConnection();



            assert con != null;

            PreparedStatement ps = con.prepareStatement(sql);

            ps.setInt(1, 2);

            System.out.println(date);

            ps.setString(2, date);



            ResultSet rs = ps.executeQuery();

            while(rs.next()){

                data.add(new CleaningSlot(rs.getString(1), rs.getString(4), rs.getString(5)));

            }



        }catch(Exception e){

            e.printStackTrace();

        }

        return data;



    }



    //This will look at the database to see when the cleaner has cleaning tasks/bookings

    public void getCleanerTimes(String dtime) throws SQLException {

        PreparedStatement ps = null;

        ResultSet rs = null;

        try{

            Connection con = db.getConnection();

            //Here user ID is sufficient, and need to make sure that the cleaner's account always has the ID 2

            String sql = "SELECT * FROM Bookings WHERE UserID = ? AND StartDate = ?";

            assert con != null;



            ps = con.prepareStatement(sql);

            ps.setInt(1, 2);

            ps.setString(2, dtime);

            rs = ps.executeQuery();



            while(rs.next()){

                bookedTimes.add(new userBookings(rs.getInt(1), rs.getInt(2), LocalTime.parse(rs.getString(4)), LocalDate.parse(rs.getString(6))));

            }



        }catch(Exception e){

            System.out.println("Error: " + e);



        }

    }



    //This method will see if the requested start time is appropriate for the cleaners

    public boolean isBooked(String et ){

        for(userBookings x: bookedTimes){

            boolean condition1 = et.equals(x.getStartTime());

            if(condition1){

                return true;

            }

        }

        //Will return false if the cleaner is not booked for the slotting starting at st (variable st)

        return false;

    }





    //This will add the cleaner timeslot of 30 minutes with startTime as we passed

    public boolean addCleanerBooking(int roomID, LocalTime st, LocalDate date){

        LocalTime et = st.plus(30, ChronoUnit.MINUTES);

        String sql = "INSERT INTO Bookings(RoomID, UserID, Username, StartTime, EndTime, StartDate, EndDate, Resources, Refreshments, RefreshmentsTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

        try{

            PreparedStatement ps = null;

            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, roomID);

            ps.setInt(2, 2);

            ps.setString(3, "CLEANER");

            ps.setString(4, st.toString());

            ps.setString(5, et.toString());

            ps.setString(6, date.toString());

            ps.setString(7, date.toString());

            ps.setString(8, "");

            ps.setString(9, "");

            ps.setString(10, "");

            ps.execute();

            return true;

        }catch(Exception e){

            System.out.println("Error: "+e);

            return false;

        }



    }



    //This method will return the next closest booking of the room to see if the room can be cleaned before then.

    public LocalTime getNextBooking(String sd,LocalTime startTime){

        String sql = "SELECT * FROM Bookings WHERE StartDate = ? ORDER BY StartTime ASC";

        try{

            Connection con = db.getConnection();

            PreparedStatement ps = null;

            ResultSet rs = null;

            ArrayList<userBookings> ub = new ArrayList<>();



            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setString(1, sd);

            rs = ps.executeQuery();

            while(rs.next()){

                ub.add(new userBookings(rs.getInt(1), rs.getInt(2), LocalTime.parse(rs.getString(4)), LocalDate.parse(rs.getString(6))));

            }



            //Since the result set is ordered we will get the immediate booking and not just a booking with a later time.

            if(ub.size()>1){

                return getNextCleanerFree(sd);

            }else{

                for(userBookings x: ub){

                    if(x.getStartTime().isAfter(startTime)){

                        return x.getStartTime();

                    }

                }

            }

        }catch(Exception e){

            System.out.println("Error: " + e);

        }

        return null;



    }



    //If there are no booking for the room in the day, then we will just get whenever the cleaner is next free

    private LocalTime getNextCleanerFree(String startDate){

        String sql = "SELECT * FROM Bookings WHERE UserID = ? AND StartDate = ? ORDER BY EndTime DESC";

        try {

            Connection con = db.getConnection();

            PreparedStatement ps = null;

            ResultSet rs = null;

            ArrayList<userBookings> ub = new ArrayList<>();



            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, 2);

            ps.setString(2, startDate);

            rs = ps.executeQuery();

            while (rs.next()) {

                ub.add(new userBookings(rs.getInt(1), rs.getInt(2), LocalTime.parse(rs.getString(4)), LocalDate.parse(rs.getString(6))));

            }

            //Now we need to get the end time of the last cleaner slot.

            for(userBookings x: ub){

                return x.getStartTime().plus(30, ChronoUnit.MINUTES);

            }







        }catch(Exception e){

            System.out.println("Error: " + e);

        }

        return null;

    }





    //Sets tableView

    public ObservableList<userBookings> loadBookingData() {

        ObservableList<userBookings> data=null;

        try {

            PreparedStatement ps;

            ResultSet rs;

            String sql = "SELECT * FROM Bookings WHERE UserID = ?";

            Connection con = db.getConnection();

            data = FXCollections.observableArrayList();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setString(1, String.valueOf(LoginController.currentUser.getUserID()));



            rs = ps.executeQuery();

            while (rs.next()) {

                //To make things complicated I've decided to use userBookings objects which contains 100% of the details and then use the data i get from it to then add the data to the observableList data i created as a userBooking object.

                userBookings ub  = new userBookings(rs.getInt(1), rs.getInt(2), rs.getString(3), LocalTime.parse(rs.getString(4)), LocalTime.parse(rs.getString(5)),

                        LocalDate.parse(rs.getString(6)), LocalDate.parse(rs.getString(7)), rs.getString(8), rs.getString(9), rs.getString(10));

                data.add(ub);

            }

        } catch (SQLException e) {

            System.err.println("Error: " + e);

        }

        return data;





    }





    //This will get the selected item from the table view and delete it

    public void deleteBooking(int roomId,String startTime,String startDate){

        try {

            PreparedStatement ps;

            String sql = "DELETE FROM Bookings WHERE RoomID = ? AND UserID = ? AND StartTime = ? AND StartDate = ?";

            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, roomId);

            ps.setInt(2, LoginController.currentUser.getUserID());

            ps.setString(3, startTime);

            ps.setString(4, startDate);

            ps.execute();

        }catch(SQLException e){

            System.out.println("Error: " + e);

        }

    }



    public boolean checkDouble(String date,LocalTime startTime,LocalTime endTime) throws SQLException {

        PreparedStatement ps =null;

        ResultSet rs=null;

        String sql = "SELECT * FROM Bookings WHERE UserID = ? and StartDate = ?";

        ArrayList<TimeSlot> results = new ArrayList<>();

        try{

            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, LoginController.currentUser.getUserID());

            ps.setString(2, date);



            ArrayList<TimeSlot> userBookings = new ArrayList<>();

            ArrayList<TimeSlot> selectedTimeSlots = new ArrayList<>(TimeSlot.returnTimeSlots(startTime, TimeSlot.getSlotNumber(startTime, endTime)));





            rs = ps.executeQuery();

            while(rs.next()){

                results.add(new TimeSlot(rs.getString(4), rs.getString(5)));

            }



            //Now we are going to split all objects in the userBookings arraylist into 30 min timeslots from the results we got from the database

            for(TimeSlot x: results){

                userBookings.addAll(TimeSlot.returnTimeSlots(x.getStartTime(), TimeSlot.getSlotNumber(x.getStartTime(), x.getEndTime())));

            }



            //rq as in requesting slot

            for(TimeSlot ub: userBookings){

                for(TimeSlot rq: selectedTimeSlots){

                    if(rq.exists(ub)){

                        return false;

                    }

                }



//                System.out.println(x.toString());

//                boolean condition1 = startTime.isAfter(x.getStartTime());

//                boolean condition2 = startTime.isBefore(x.getEndTime());

//                boolean condition3 = endTime.isBefore(x.getEndTime());

//                boolean condition4 = endTime.isAfter(x.getStartTime());

//                System.out.println(startTime.toString());

//                System.out.println(endTime.toString());

//                if((condition1 && condition2) || (condition3 && condition4)){

//                    return false;

//                }

//                if(startTime.equals(x.getStartTime()) || endTime.equals(x.getEndTime())){

//                    return false;

//                }

            }



            return true;



        }catch(Exception e){

            e.printStackTrace();

        }finally{

            assert ps != null;

            assert rs != null;

            ps.close();

            rs.close();

        }

        return false;

    }







    //This code does nothing but display the free times for the date selected in 30 minute intervals and adds them to the list view

    public ArrayList<TimeSlot> setTableView(LocalDate selectedDate,int selectedRoom) throws SQLException {

        PreparedStatement ps = null;

        ArrayList<TimeSlot> out = new ArrayList<>();

        ResultSet rs = null;

        String sql = "SELECT * FROM Bookings WHERE RoomID = ? and StartDate = ?";

        try {

            if (selectedDate == null) {

                return null;

            }

            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);







            ps.setInt(1, selectedRoom);

            ps.setString(2, selectedDate.toString());





            ArrayList<LocalTime> startTimes = new ArrayList<>();

            ArrayList<LocalTime> endTimes = new ArrayList<>();



            rs = ps.executeQuery();

            while (rs.next()) {

                startTimes.add(LocalTime.parse(rs.getString(4)));

                endTimes.add(LocalTime.parse(rs.getString(5)));

            }





            ArrayList<TimeSlot> template = TimeSlot.createTimeSlots();

            ArrayList<TimeSlot> bookedTimeSlots = new ArrayList<>();



            //The methods below me could've easily been made into methods of the timeslot class, but TIME :/

            for (int x = 0; x < startTimes.size(); x++) {

                int length = TimeSlot.getSlotNumber(startTimes.get(x), endTimes.get(x));

                bookedTimeSlots.addAll(TimeSlot.returnTimeSlots(startTimes.get(x), length));



            }



            /*

            The method list contains returns true if the object ts is already existing in bookedTimeSlots. If it does not exist

            then we can add it to the out arrayList which will be displayed to the user

            */

            for(TimeSlot ts: template){

                if(!TimeSlot.listContains(ts, bookedTimeSlots)){

                    out.add(ts);

                }

            }





        } catch (Exception e) {

            System.out.println(e);



        } finally {

            ps.close();

            rs.close();

        }

        return out;

    }







    //This will take our details and add it to the Bookings table in our database

    public boolean addBooking(String st,String et,int roomID,String dtime,String resources,String refresh,String refreshTime) throws SQLException {



        PreparedStatement ps = null;

        String sql = "INSERT INTO Bookings(RoomID, UserID, Username, StartTime, EndTime, StartDate, EndDate, Resources, Refreshments, RefreshmentsTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

        try {

            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, roomID);

            ps.setInt(2, LoginController.currentUser.getUserID());

            ps.setString(3, LoginController.currentUser.getUsername());

            ps.setString(4, st);

            ps.setString(5, et);

            ps.setString(6, dtime);

            ps.setString(7, dtime);

            ps.setString(8, resources);

            ps.setString(9, refresh);

            ps.setString(10, refreshTime);

            ps.execute();

            return true;

        } catch (Exception e) {

            System.out.println("Error: " + e);

            return false;

        }

    }



    //This method will make sure that the caterers are free to deliver the refreshments for the selected time.

    public ArrayList<LocalTime> checkRefreshments(int roomId,String dtime) throws SQLException {





        PreparedStatement ps = null;

        ResultSet rs = null;

        String sql = "SELECT * FROM Refreshments WHERE RoomID = ? AND Date = ?";

        ArrayList<LocalTime> results = new ArrayList<>();



        try {

            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, roomId);

            ps.setString(2, dtime);



            rs = ps.executeQuery();

            while (rs.next()) {

                results.add(LocalTime.parse(rs.getString(3)));

            }

            return results;

        } catch (SQLException e) {

            e.printStackTrace();

            return null;

        } finally {

            //To close the connection

            assert ps != null;

            ps.close();

            assert rs != null;

            rs.close();

        }

    }



    public boolean addRefreshment(String[] refreshments,String[] refreshmentTimes,int roomId,String dtime) throws SQLException {

        PreparedStatement ps = null;

        try {

            Connection con = db.getConnection();

            String sql = "INSERT INTO Refreshments(RoomID, Date, Time, Refreshment) VALUES (?, ?, ?, ?)";

            assert con != null;

            for (int x = 0; x < refreshments.length; x++) {

                ps = con.prepareStatement(sql);

                ps.setInt(1, roomId);

                ps.setString(2, dtime);

                ps.setString(3, refreshmentTimes[x]);

                ps.setString(4, refreshments[x]);

                ps.execute();

            }



            return true;

        } catch (Exception e) {

            System.out.println("Error: " + e);

            return false;

        } finally {

            assert ps != null;

            ps.close();

        }





    }





}



CatererModel.java
package Models;





//This class will be used every time a booking is made to add the refreshment and its times to the caterer's time table, provided that they are free



public class CatererModel {



    private final String roomID;

    private final String time;

    private final String refreshment;



    public CatererModel(String roomID, String time, String refreshment) {

        this.roomID = roomID;

        this.time = time;

        this.refreshment = refreshment;

    }



    public String getRoomID() {

        return roomID;

    }



    public String getTime() {

        return time;

    }



    public String getRefreshment() {

        return refreshment;

    }

}



RefreshmentsModel.java
package Models;









import Dao.DBConnect;

import javafx.collections.FXCollections;

import javafx.collections.ObservableList;



import java.sql.*;



public class RefreshmentsModel {



    private long roomId;

    private String date;

    private String time;

    private String refreshment;



    private DBConnect db;

    Statement stmt = null;



    public long getRoomId() {

        return roomId;

    }



    public void setRoomId(long roomId) {

        this.roomId = roomId;

    }





    public String getDate() {

        return date;

    }



    public void setDate(String date) {

        this.date = date;

    }





    public String getTime() {

        return time;

    }



    public void setTime(String time) {

        this.time = time;

    }





    public String getRefreshment() {

        return refreshment;

    }



    public void setRefreshment(String refreshment) {

        this.refreshment = refreshment;

    }



    public RefreshmentsModel() {

        db = DBConnect.getInstance();

    }



    //This will take the following as parameters to add their details into the database. The ID column will be automatically incremented

    public boolean registerLogic(String Username, String Firstname, String Lastname, String Password, String Email) throws SQLException {

        String sql = "INSERT INTO Users(Username, Firstname, Lastname, Password, Email, Account) VALUES (?, ?, ?, ?, ?, ?)";

        try {

            Connection con = db.getConnection();

            assert con != null;

            PreparedStatement statement = con.prepareStatement(sql);



            statement.setString(1, Username);

            statement.setString(2, Firstname);

            statement.setString(3, Lastname);

            statement.setString(4, Password);

            statement.setString(5, Email);

            statement.setString(6, "Admin");



            statement.execute();

            con.close();

            return true;

        } catch (SQLException e) {

            System.err.println("Error!\n" + e);

            return false;

        }

    }



    public ObservableList<CatererModel> loadTable(String date) throws SQLException {

        PreparedStatement ps = null;

        ResultSet rs = null;

        ObservableList<CatererModel> data = FXCollections.observableArrayList();

        try {



            String sql = "SELECT * FROM Refreshments WHERE Date = ?";



            Connection con = db.getConnection();

            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setString(1, date);

            rs = ps.executeQuery();



            while (rs.next()) {

                data.add(new CatererModel(rs.getString(1), rs.getString(3), rs.getString(4)));

            }



            //Here i was going to make sure i close the connection by calling the method ps and rs .close() but for now it doesn't really matter



        } catch (Exception e) {

            e.printStackTrace();

        }

        return data;

    }





}



RoomData.java
package Models;





public class RoomData {



  private long id;

  private String name;

  private String number;

  private String picture;

  private String description;





  public long getId() {

    return id;

  }



  public void setId(long id) {

    this.id = id;

  }





  public String getNumber() {

    return number;

  }



  public void setNumber(String number) {

    this.number = number;

  }





  public String getPicture() {

    return picture;

  }



  public void setPicture(String picture) {

    this.picture = picture;

  }





  public String getDescription() {

    return description;

  }



  public void setDescription(String description) {

    this.description = description;

  }



  public String getName() {

    return name;

  }



  public void setName(String name) {

    this.name = name;

  }



  public RoomData(long id, String name, String number, String picture, String description) {

    this.id = id;

    this.name = name;

    this.number = number;

    this.picture = picture;

    this.description = description;

  }

  public RoomData() {



  }



}



RoomModel.java
package Models;





import Dao.DBConnect;

import javafx.collections.FXCollections;

import javafx.collections.ObservableList;



import java.sql.*;



/**

 * @ClassName: DaoModel

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/4/17 9:24

 * @Version: v1.0

 */

public class RoomModel {

    private DBConnect db;

    Statement stmt = null;

    private ResultSet rs;



    public RoomModel() {

        db = DBConnect.getInstance();

    }





    // INSERT INTO METHOD



    /**

     * @Description: insertRecords

     * @param: [robjs]

     * @return: void

     */

    public void insert(RoomData roomData) {

        try {



            if (null == findOneByNunber(roomData.getNumber())) {

                stmt = db.getConnection().createStatement();

                PreparedStatement ppst = null;

                ppst = db.getConnection().prepareStatement("insert into Room(name,number,picture,description) values(?, ?, ?,?)");

                ppst.setString(1, roomData.getName());

                ppst.setString(2, roomData.getNumber());

                ppst.setString(3, roomData.getPicture());

                ppst.setString(4, roomData.getDescription());

                ppst.execute();

                ppst.close();

                System.out.println("212");

                db.getConnection().close();

            }else{

                update(roomData);

            }

        } catch (SQLException se) {

            se.printStackTrace();

        }

    }



    /**

     * @Description: insertRecords

     * @param: [robjs]

     * @return: void

     */

    public boolean update(RoomData roomData) {

        try {

                stmt = db.getConnection().createStatement();

                PreparedStatement ppst = null;

                ppst = db.getConnection().prepareStatement("update Room set name=?,picture=?,description=? where number=?");

                ppst.setString(1, roomData.getName());

                ppst.setString(2, roomData.getPicture());

                ppst.setString(3, roomData.getDescription());

                ppst.setString(4, roomData.getNumber());

            System.out.println("564");

                ppst.execute();

                ppst.close();

                db.getConnection().close();

                return true;

        } catch (SQLException se) {

            se.printStackTrace();

            return false;

        }

    }



    public ObservableList<RoomData> loadCustomerData() {

        ObservableList<RoomData> data = FXCollections.observableArrayList();

        try {

            String sql = "SELECT * FROM Room";

            Connection con = db.getConnection();



            assert con != null;

            ResultSet rs = con.createStatement().executeQuery(sql);

            while (rs.next()) {

                data.add(new RoomData(rs.getInt(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getString(5)));

            }

        } catch (SQLException e) {

            System.err.println("Error: " + e);

        }

        return data;



    }



    public RoomData findOneByNunber(String number) {

        RoomData roomData=null;

        try {

            stmt = db.getConnection().createStatement();

            PreparedStatement ppst = null;

            ppst = db.getConnection().prepareStatement("SELECT * FROM Room  where number=? limit 1");

            ppst.setString(1, number);

            ResultSet rs = ppst.executeQuery();

            while (rs.next()) {

                return (new RoomData(rs.getInt(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getString(5)));

            }

        } catch (SQLException e) {

            System.err.println("Error: " + e);

        }

        return roomData;



    }



    public void delete(RoomData roomData) {

        try {

            stmt = db.getConnection().createStatement();

            PreparedStatement ppst = null;

            ppst = db.getConnection().prepareStatement("delete FROM Room where id=?");

            ppst.setLong(1, roomData.getId());

            ppst.execute();

            ppst.close();

            db.getConnection().close();



        } catch (SQLException e) {

            System.err.println("Error: " + e);

        }



    }

}



UsersModel.java
package Models;







import Controllers.Admin.userBookings;



import Controllers.Login.LoginController;

import Controllers.Login.User;

import Dao.DBConnect;

import javafx.collections.FXCollections;

import javafx.collections.ObservableList;

import javafx.fxml.FXML;



import java.sql.*;

import java.time.LocalDate;

import java.time.LocalTime;

import java.time.temporal.ChronoUnit;

import java.util.ArrayList;



public class UsersModel extends BaseModel {



    private long id;

    private String username;

    private String firstname;

    private String lastname;

    private String password;

    private String email;

    private String account;

    private DBConnect db;

    Statement stmt = null;



    public long getId() {

        return id;

    }



    public void setId(long id) {

        this.id = id;

    }





    public String getUsername() {

        return username;

    }



    public void setUsername(String username) {

        this.username = username;

    }





    public String getFirstname() {

        return firstname;

    }



    public void setFirstname(String firstname) {

        this.firstname = firstname;

    }





    public String getLastname() {

        return lastname;

    }



    public void setLastname(String lastname) {

        this.lastname = lastname;

    }





    public String getPassword() {

        return password;

    }



    public void setPassword(String password) {

        this.password = password;

    }





    public String getEmail() {

        return email;

    }



    public void setEmail(String email) {

        this.email = email;

    }





    public String getAccount() {

        return account;

    }



    public void setAccount(String account) {

        this.account = account;

    }



    public UsersModel() {

        db = DBConnect.getInstance();

    }





    //This will take the following parameters and will verify it with the database.

    // It will reject you if you try and login as a customer from and admin account and vice versa

    public boolean isLogin(String username, String password, String AccountType) throws SQLException {

        PreparedStatement ps = null;

        ResultSet rs = null;

        String sql = "{call UserLogin(?,?,?)}";

        try {

            ps = db.getConnection().prepareStatement(sql);

            ps.setString(1, username);

            ps.setString(2, password);

            ps.setString(3, AccountType);



            rs = ps.executeQuery();

            if (rs.next()) {

                LoginController.currentUser = new User(rs.getInt(1), rs.getString(3), rs.getString(4), rs.getString(6), rs.getString(2));

                return true;

            }

            return false;

        } catch (SQLException e) {

            return false;

        } finally {

            assert ps != null;

            assert rs != null;

            ps.close();

            rs.close();

        }

    }



    @FXML

    public ObservableList<AccountData> loadCustomerData() {

        ObservableList<AccountData> data= FXCollections.observableArrayList();

        try {

            String sql = "SELECT * FROM Users";

            Connection con = db.getConnection();



            assert con != null;

            ResultSet rs = con.createStatement().executeQuery(sql);

            while (rs.next()) {



                data.add(new AccountData(rs.getString(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getString(5), rs.getString(6), rs.getString(7)));

            }

        } catch (SQLException e) {

            System.err.println("Error: " + e);

        }

        return data;



    }



    //If there are no booking for the room in the day, then we will just get whenever the cleaner is next free

    private LocalTime getNextCleanerFree(String startDate){

        String sql = "SELECT * FROM Bookings WHERE UserID = ? AND StartDate = ? ORDER BY EndTime DESC";

        try {

            Connection con = db.getConnection();

            PreparedStatement ps = null;

            ResultSet rs = null;

            ArrayList<userBookings> ub = new ArrayList<>();



            assert con != null;

            ps = con.prepareStatement(sql);

            ps.setInt(1, 2);

            ps.setString(2, startDate);

            rs = ps.executeQuery();

            while (rs.next()) {

                ub.add(new userBookings(rs.getInt(1), rs.getInt(2), LocalTime.parse(rs.getString(4)), LocalDate.parse(rs.getString(6))));

            }

            //Now we need to get the end time of the last cleaner slot.

            for(userBookings x: ub){

                return x.getStartTime().plus(30, ChronoUnit.MINUTES);

            }







        }catch(Exception e){

            System.out.println("Error: " + e);

        }

        return null;

    }



    //This will take the following as parameters to add their details into the database. The ID column will be automatically incremented

    public boolean registerLogic(String Username, String Firstname, String Lastname, String Password, String Email) throws SQLException {

        String sql = "INSERT INTO Users(Username, Firstname, Lastname, Password, Email, Account) VALUES (?, ?, ?, ?, ?, ?)";

        Connection con = db.getConnection();

        try {

            con.setAutoCommit(false);

            assert con != null;

            PreparedStatement statement = con.prepareStatement(sql);



            statement.setString(1, Username);

            statement.setString(2, Firstname);

            statement.setString(3, Lastname);

            statement.setString(4, Password);

            statement.setString(5, Email);

            statement.setString(6, "Customer");



            statement.execute();

            con.commit();

            con.close();

            return true;

        } catch (SQLException e) {

            System.err.println("Error!\n" + e);



            try {

                if(con !=null&& !con.isClosed()) { //

                    con.rollback();//rollback

                }

            } catch (SQLException ex) {

                ex.printStackTrace();

            }

            return false;

        }

    }



}



Admin.css
/*<editor-fold desc="labels">*/

#backgroundLabel{

    -fx-background-color: lightblue;

}

#DBOnlineLabel{

    -fx-text-fill: green;

    -fx-text-alignment: right;

}

#dbSizeLabel{

    -fx-text-alignment: right;

    -fx-text-fill: green;

}

#headingLabel{

    -fx-text-fill: black;

    -fx-font-weight: bold;

    -fx-font-size: 16;

    -fx-alignment: center;

}

#accountLabel{

    -fx-text-fill: black;

    -fx-font-weight: bold;

    -fx-font-size: 16;

}

/*</editor-fold>*/



/*<editor-fold desc="buttons">*/

.button{

    -fx-background-color: teal;

    -fx-text-fill: white;

}

.button:hover{

    -fx-background-color: turquoise;

    -fx-text-fill: black;

}

#viewFullScheduleButton:hover{

    -fx-background-color: teal;

    -fx-text-fill: white;

}

#addAdminButton{

    -fx-background-color: green;

}

#addAdminButton:hover{

    -fx-background-color: lightgreen;

}

#reloadButton{

    -fx-background-color: darkgrey;

}

#reloadButton:hover{

    -fx-background-color: grey;

}

/*</editor-fold>*/



.chart-legend {

    -fx-background-color: #00ebdf;

}


Caterers.css
.root{

    -fx-background-color: lightblue;

}

#backButton{

    -fx-background-color: teal;

    -fx-text-fill: white;

}

#backButton:hover{

    -fx-background-color: turquoise;

    -fx-text-fill: black;



}


Cleaners.css
.root{

    -fx-background-color: lightblue;

}

#backButton{

    -fx-background-color: teal;

    -fx-text-fill: white;

}

#backButton:hover{

    -fx-background-color: turquoise;

    -fx-text-fill: black;



}


Customer.css
.root{

    -fx-background-color: lightblue;

}



#welcomeLabel{

    -fx-font-size: 16;

    -fx-font-weight: bold;

}



#newBookingButton{

    -fx-background-color: darkgreen;

    -fx-text-fill: white;

}

#newBookingButton:hover{

    -fx-background-color: lightgreen;

    -fx-text-fill: black;

}

#backButton{

    -fx-background-color: teal;

    -fx-text-fill: white;

}

#backButton:hover{

    -fx-background-color: turquoise;

    -fx-text-fill: black;

}


Login.css
/*<editor-fold desc="fields">*/

.text-field {

    -fx-background-color: #dbb1b1, #fff0f0;

    -fx-background-radius: 15;

    -fx-border-radius: 15;

    -fx-border-color: lightblue;

}

.text-field{

    -fx-background-color: transparent;

}

.text-field .scroll-pane .viewport{

    -fx-background-color: transparent;

}

.text-field .scroll-pane .content{

    -fx-background-color: transparent;

}

.combo-box-base {

    -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, -fx-body-color, lightblue;

}

/*</editor-fold>*/





#meetingBookerLabel{

    -fx-font-size: 16;

    -fx-font-family: "Segoe UI";

}

#connectionLabel{

    -fx-text-fill: green;

}

#credentialsLabel{

    -fx-alignment: center;

    -fx-text-fill: red;

}



.button{

    -fx-text-fill: black;

    -fx-background-color: lightblue;

}

.button:hover{

    -fx-text-fill: black;

    -fx-font-weight: bold;

}



Register.css
/*<editor-fold desc="labels">*/

#Heading{

    -fx-text-fill: black;

    -fx-font-size: 16;

    -fx-font-weight: bold;

}

#errorLabel{

    -fx-alignment: center;

    -fx-text-fill: red;

}

#backgroundLabel{

    -fx-background-color: lightblue;

}

.label{

    -fx-text-fill: black;

    -fx-font-size: 12;

}

/*</editor-fold>*/



/*<editor-fold desc="buttons">*/

#cancelButton{

    -fx-text-fill: white;

    -fx-background-color: darkred;

}

#cancelButton:hover{

    -fx-background-color: red;

    -fx-font-weight: bold;

}

#registerButton{

    -fx-text-fill: white;

    -fx-background-color: teal;

}

#registerButton:hover{

    -fx-background-color: turquoise;

    -fx-font-weight: bold;

}

/*</editor-fold>*/



.text-field {

    -fx-background-color: #dbb1b1, #fff0f0;

    -fx-background-radius: 15;

    -fx-border-radius: 15;

    -fx-border-color: white;

}

.text-field{

    -fx-background-color: white;

}


Room.css
.root{

    -fx-background-color: lightblue;

}



/*<editor-fold desc="fields and .button">*/

.button{

    -fx-text-fill: white;

}

.text-field{

    -fx-background-color: lightcyan;

}

.text-area .content{

    -fx-background-color: lightcyan;

}

.combo-box-base {

    -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, lightcyan;

    -fx-background-insets: 0 0 -1 0, 0, 1, 2;

    -fx-background-radius: 3px, 3px, 2px, 1px;

}

.table-view{

    -fx-background-color: lightcyan;

}

.label{

    -fx-font-weight: bold;

}

/*</editor-fold>*/

.root{

    -fx-background-color: lightblue;

}



/*<editor-fold desc="fields and .button">*/

.button{

    -fx-text-fill: white;

}

.text-field{

    -fx-background-color: lightcyan;

}

.text-area .content{

    -fx-background-color: lightcyan;

}

.combo-box-base {

    -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, lightcyan;

    -fx-background-insets: 0 0 -1 0, 0, 1, 2;

    -fx-background-radius: 3px, 3px, 2px, 1px;

}

.table-view{

    -fx-background-color: lightcyan;

}

.label{

    -fx-font-weight: bold;

}

/*</editor-fold>*/



/*<editor-fold desc="labels">*/

#tableLabel{

    -fx-font-weight: bold;

    -fx-font-size: 16;

    -fx-text-alignment: center;

}

#backgroundLabel{

    -fx-background-color: lightblue;

}

#errorLabel{

    -fx-text-fill: darkred;

}

#infoLabel{

    -fx-text-alignment: center;

    -fx-text-fill: darkblue;

}

/*</editor-fold>*/



/*<editor-fold desc="buttons">*/

#bookButton{

    -fx-background-color: #00cbbb;

}

#bookButton:hover{

    -fx-background-color: #33eeee;

    -fx-font-weight: bold;

    -fx-text-fill: black;

}



#backButton{

    -fx-background-color: darkred;

}

#backButton:hover{

    -fx-background-color: red;

    -fx-font-weight: bold;

}



#refreshButton{

    -fx-font-size: 10;

    -fx-background-color: teal;

    -fx-text-fill: white;

}

#refreshButton:hover{

    -fx-background-color: turquoise;

    -fx-text-fill: black;

    -fx-font-weight: bold;

}

/*</editor-fold>*/





RoomBooker.css
.root{

    -fx-background-color: lightblue;

}



/*<editor-fold desc="fields and .button">*/

.button{

    -fx-text-fill: white;

}

.text-field{

    -fx-background-color: lightcyan;

}

.text-area .content{

    -fx-background-color: lightcyan;

}

.combo-box-base {

    -fx-background-color: -fx-shadow-highlight-color, -fx-outer-border, -fx-inner-border, lightcyan;

    -fx-background-insets: 0 0 -1 0, 0, 1, 2;

    -fx-background-radius: 3px, 3px, 2px, 1px;

}

.table-view{

    -fx-background-color: lightcyan;

}

.label{

    -fx-font-weight: bold;

}

/*</editor-fold>*/



/*<editor-fold desc="labels">*/

#tableLabel{

    -fx-font-weight: bold;

    -fx-font-size: 16;

    -fx-text-alignment: center;

}

#backgroundLabel{

    -fx-background-color: lightblue;

}

#errorLabel{

    -fx-text-fill: darkred;

}

#infoLabel{

    -fx-text-alignment: center;

    -fx-text-fill: darkblue;

}

/*</editor-fold>*/



/*<editor-fold desc="buttons">*/

#bookButton{

    -fx-background-color: #00cbbb;

}

#bookButton:hover{

    -fx-background-color: #33eeee;

    -fx-font-weight: bold;

    -fx-text-fill: black;

}



#backButton{

    -fx-background-color: darkred;

}

#backButton:hover{

    -fx-background-color: red;

    -fx-font-weight: bold;

}



#refreshButton{

    -fx-font-size: 10;

    -fx-background-color: teal;

    -fx-text-fill: white;

}

#refreshButton:hover{

    -fx-background-color: turquoise;

    -fx-text-fill: black;

    -fx-font-weight: bold;

}

/*</editor-fold>*/


MD5Utils.java
package Utils;



import java.math.BigInteger;

import java.security.MessageDigest;

import java.security.NoSuchAlgorithmException;



/**

 * @ClassName: MD5Utils

 * @Description: TODO

 * @Author: Qiaofeng Lin

 * @Date: 2022/5/1 7:51

 * @Version: v1.0

 */

public class MD5Utils {

    public static String stringToMD5(String plainText) {

        byte[] secretBytes = null;

        try {

            secretBytes = MessageDigest.getInstance("md5").digest(

                    plainText.getBytes());

        } catch (NoSuchAlgorithmException e) {

            throw new RuntimeException("md5 error");

        }

        String md5code = new BigInteger(1, secretBytes).toString(16);

        for (int i = 0; i < 32 - md5code.length(); i++) {

            md5code = "0" + md5code;

        }

        return md5code;

    }



}



Admin.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.chart.*?>

<?import javafx.scene.control.*?>

<?import javafx.scene.layout.*?>



<AnchorPane fx:id="fullPane" prefHeight="720.0" prefWidth="1280.0" xmlns="http://javafx.com/javafx/11.0.14-internal" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Admin.AdminController">

   <children>

      <Label fx:id="backgroundLabel" layoutX="79.0" layoutY="32.0" prefHeight="720.0" prefWidth="1280.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0" />

      <Button fx:id="caterersDashboardButton" layoutX="117.0" layoutY="468.0" mnemonicParsing="false" onAction="#openCaterersDashboard" prefHeight="23.0" prefWidth="150.0" text="Caterer's Dashboard">

         <tooltip>

            <Tooltip text="Shows caterers schedule" />

         </tooltip></Button>

      <Button fx:id="cleanersDashboardButton" layoutX="116.0" layoutY="508.0" mnemonicParsing="false" onAction="#openCleanersDashboard" prefHeight="23.0" prefWidth="150.0" text="Cleaner's Dashboard">

         <tooltip>

            <Tooltip text="Show cleaners schedule" />

         </tooltip></Button>

      <Button layoutX="14.0" layoutY="681.0" mnemonicParsing="false" onAction="#backToLogin" text="Exit" AnchorPane.bottomAnchor="15.0" AnchorPane.leftAnchor="15.0">

         <tooltip>

            <Tooltip text="Goes back to login page" />

         </tooltip></Button>

      <Button fx:id="addRoomButton" onAction="#addRoom" layoutX="117.0" layoutY="428.0" mnemonicParsing="false" prefHeight="23.0" prefWidth="150.0" text="Room Manage">

         <tooltip>

            <Tooltip text="Currently inop!" />

         </tooltip></Button>

      <PieChart fx:id="chart" prefHeight="380.0" prefWidth="380.0" />

      <TableView fx:id="myTable" layoutX="380.0" layoutY="40.0" prefHeight="680.0" prefWidth="900.0" AnchorPane.topAnchor="40.0">

        <columns>

          <TableColumn fx:id="IDColumn" prefWidth="34.0" text="ID" />

          <TableColumn fx:id="usernameColumn" prefWidth="128.0" text="Username" />

            <TableColumn fx:id="firstnameColumn" prefWidth="157.0" text="First name" />

            <TableColumn fx:id="lastnameColumn" prefWidth="143.0" text="Last name" />

            <TableColumn fx:id="passwordColumn" prefWidth="140.0" text="Password" />

            <TableColumn fx:id="emailColumn" minWidth="0.0" prefWidth="187.0" text="Email" />

            <TableColumn fx:id="accountTypeColumn" minWidth="0.0" prefWidth="135.0" text="Account" />

        </columns>

      </TableView>

      <Label fx:id="accountLabel" layoutX="772.0" layoutY="14.0" text="Accounts Database" />

      <Button fx:id="addAdminButton" layoutX="117.0" layoutY="632.0" mnemonicParsing="false" onAction="#addAdmin" prefHeight="23.0" prefWidth="150.0" text="+ Admin">

         <tooltip>

            <Tooltip text="Add new user as admin" />

         </tooltip></Button>

      <Button fx:id="reloadButton" layoutX="117.0" layoutY="592.0" mnemonicParsing="false" onAction="#refreshPage" prefHeight="23.0" prefWidth="150.0" text="Reload data">

         <tooltip>

            <Tooltip text="refreshes chart and table" />

         </tooltip></Button>

      <Label fx:id="headingLabel" layoutX="85.0" layoutY="14.0" prefHeight="20.0" prefWidth="210.0" text="Today's bookings overview" />

      <Label fx:id="dbSizeLabel" layoutX="206.0" layoutY="672.0" prefHeight="18.0" prefWidth="150.0" />

      <Button fx:id="clearDB" layoutX="118.0" layoutY="552.0" mnemonicParsing="false" onAction="#clearUpDB" prefHeight="23.0" prefWidth="150.0" text="Delete History in DB">

         <tooltip>

            <Tooltip text="Will remove data entries from yesterday" />

         </tooltip></Button>

      <Label fx:id="DBOnlineLabel" layoutX="206.0" layoutY="696.0" prefHeight="18.0" prefWidth="150.0" />

   </children>

</AnchorPane>



adminCreation.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.Button?>

<?import javafx.scene.control.Label?>

<?import javafx.scene.control.PasswordField?>

<?import javafx.scene.control.TextField?>

<?import javafx.scene.control.Tooltip?>

<?import javafx.scene.layout.AnchorPane?>



<AnchorPane prefHeight="400.0" prefWidth="400.0" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Admin.adminCreation">

    <children>

        <Label fx:id="backgroundLabel" layoutX="25.0" layoutY="14.0" prefHeight="400.0" prefWidth="400.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0" />

        <Button fx:id="registerButton" layoutX="320.0" layoutY="338.0" mnemonicParsing="false" onAction="#registerUser" text="Register">

         <tooltip>

            <Tooltip text="Register account with current details" />

         </tooltip></Button>

        <Button fx:id="cancelButton" layoutX="14.0" layoutY="338.0" mnemonicParsing="false" onAction="#backToAdmin" text="Cancel">

         <tooltip>

            <Tooltip text="Cancel and go back to previous page" />

         </tooltip></Button>

        <TextField fx:id="usernameField" layoutX="192.0" layoutY="102.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter username" />

        <TextField fx:id="firstNameField" layoutX="192.0" layoutY="137.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter First name" />

        <TextField fx:id="lastNameField" layoutX="192.0" layoutY="169.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter Last name" />

        <TextField fx:id="emailField" layoutX="192.0" layoutY="203.0" prefHeight="26.0" prefWidth="160.0" promptText="someone@example.com" />

        <PasswordField fx:id="passwordField" layoutX="192.0" layoutY="238.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter your password" />

        <Label layoutX="40.0" layoutY="106.0" prefWidth="62.0" text="Username" />

        <Label layoutX="41.0" layoutY="242.0" text="Password" />

        <Label layoutX="39.0" layoutY="141.0" text="First name" />

        <Label layoutX="40.0" layoutY="173.0" text="Last name" />

        <Label layoutX="53.0" layoutY="209.0" text="Email" />

        <Label fx:id="Heading" layoutX="127.0" layoutY="41.0" text="Create an account" />

        <Label fx:id="errorLabel" layoutX="113.0" layoutY="295.0" prefHeight="15.0" prefWidth="160.0" textAlignment="CENTER" />

    </children>

</AnchorPane>



Caterers.fxml
<?xml version="1.0" encoding="UTF-8"?>





<?import javafx.scene.control.*?>

<?import javafx.scene.layout.AnchorPane?>

<AnchorPane prefHeight="720.0" prefWidth="640.0" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Caterers.CaterersController">

   <children>

      <TableView fx:id="myTable" layoutX="15.0" layoutY="60.0" prefHeight="595.0" prefWidth="610.0">

        <columns>

          <TableColumn fx:id="roomIDColumn" prefWidth="100.0" text="Room ID" />

          <TableColumn fx:id="timeColumn" prefWidth="200.0" text="Refreshment Time" />

            <TableColumn fx:id="refreshmentColumn" prefWidth="310.0" text="Refreshment" />

        </columns>

      </TableView>

      <DatePicker fx:id="datePicker" layoutX="451.0" layoutY="673.0" />

      <Button fx:id="backButton" layoutX="14.0" layoutY="673.0" mnemonicParsing="false" onAction="#returnToAdmin" text="Back" />

      <Label fx:id="headingLabel" layoutX="271.0" layoutY="14.0" text="Caterer's Schedule" />

   </children>

</AnchorPane>



Cleaners.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.*?>

<?import javafx.scene.layout.AnchorPane?>

<AnchorPane prefHeight="720.0" prefWidth="640.0" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Cleaners.CleanersController">

   <children>

      <Label layoutX="271.0" layoutY="14.0" text="Cleaner's schedule" />

      <DatePicker fx:id="datePicker" editable="false" layoutX="450.0" layoutY="668.0" />

      <Button fx:id="backButton" layoutX="14.0" layoutY="668.0" mnemonicParsing="false" onAction="#returnToAdmin" text="Back" />

      <Label layoutX="369.0" layoutY="672.0" text="Select date: " />

      <TableView fx:id="myTable" layoutX="37.0" layoutY="47.0" prefHeight="603.0" prefWidth="600.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0">

        <columns>

          <TableColumn fx:id="roomIDColumn" prefWidth="100.0" text="Room ID" />

          <TableColumn fx:id="startTimeColumn" prefWidth="250.0" text="Start time" />

            <TableColumn fx:id="endTimeColumn" prefWidth="250.0" text="End time" />

        </columns>

      </TableView>

   </children>

</AnchorPane>



Customer.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.*?>

<?import javafx.scene.layout.*?>



<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="720.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/11.0.14-internal" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Customer.CustomerController">

   <children>

      <TableView fx:id="myTable" layoutX="250.0" layoutY="252.0" prefHeight="200.0" prefWidth="200.0" AnchorPane.bottomAnchor="75.0" AnchorPane.leftAnchor="15.0" AnchorPane.rightAnchor="15.0" AnchorPane.topAnchor="50.0">

        <columns>

          <TableColumn fx:id="roomIDColumn" prefWidth="65.0" text="Room ID" />

          <TableColumn fx:id="startDateColumn" prefWidth="107.0" text="Date" />

            <TableColumn fx:id="startTimeColumn" prefWidth="94.0" text="Start time" />

            <TableColumn fx:id="endTimeColumn" prefWidth="95.0" text="End time" />

            <TableColumn fx:id="resourcesColumn" prefWidth="196.0" text="Resources" />

            <TableColumn fx:id="refreshmentsColumn" prefWidth="153.0" text="Refreshments" />

            <TableColumn fx:id="refreshmentsTimeColumn" prefWidth="159.0" text="Refreshments Time" />

        </columns>

         <contextMenu>

            <ContextMenu>

              <items>

                <MenuItem mnemonicParsing="false" onAction="#deleteBooking" text="Delete" />

              </items>

            </ContextMenu>

         </contextMenu>

      </TableView>

      <Label fx:id="welcomeLabel" alignment="CENTER" layoutX="255.0" layoutY="22.0" prefHeight="17.0" prefWidth="390.0" />

      <Button fx:id="newBookingButton" layoutX="782.0" layoutY="684.0" mnemonicParsing="false" onAction="#newBooking" text="Book a room">

         <tooltip>

            <Tooltip text="Make a new booking" />

         </tooltip>

      </Button>

      <Button fx:id="backButton" layoutX="14.0" layoutY="684.0" mnemonicParsing="false" onAction="#backToLogin" text="Back">

         <tooltip>

            <Tooltip text="Takes you back to customer dashboard" />

         </tooltip>

      </Button>

   </children>

</AnchorPane>



LoginFXML.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.*?>

<?import javafx.scene.layout.AnchorPane?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0"

            prefWidth="600.0" xmlns="http://javafx.com/javafx/11.0.14-internal" xmlns:fx="http://javafx.com/fxml/1"

            fx:controller="Controllers.Login.LoginController">

    <TextField fx:id="usernameField" alignment="CENTER" layoutX="172.0" layoutY="200.0" prefHeight="23.0"

               prefWidth="255.0" promptText="Username"/>

    <PasswordField fx:id="passwordField" alignment="CENTER" layoutX="173.0" layoutY="240.0" prefHeight="23.0"

                   prefWidth="255.0" promptText="Password"/>

    <Label fx:id="connectionLabel" layoutX="500.0" layoutY="377.0" prefHeight="18.0" prefWidth="100.0">

        <tooltip>

            <Tooltip text="Status of the connection to the database"/>

        </tooltip>

    </Label>

    <Button fx:id="loginButton" layoutX="174.0" layoutY="334.0" mnemonicParsing="false" onAction="#login"

            prefHeight="23.0" prefWidth="111.0" text="Log in">

        <tooltip>

            <Tooltip text="Login"/>

        </tooltip>

    </Button>

    <ComboBox fx:id="accountType" layoutX="174.0" layoutY="279.0" prefHeight="30.0" prefWidth="255.0"

              promptText="Account type">

        <tooltip>

            <Tooltip text="Select what type of account you have"/>

        </tooltip>

    </ComboBox>

    <Button fx:id="registerButton" layoutX="328.0" layoutY="334.0" mnemonicParsing="false" onAction="#registerUser"

            prefHeight="23.0" prefWidth="100.0" text="Register">

        <tooltip>

            <Tooltip text="Create a new account"/>

        </tooltip>

    </Button>

    <Label fx:id="credentialsLabel" layoutY="368.0" prefHeight="18.0" prefWidth="100.0"/>

    <Label fx:id="backgroundLabel" layoutY="-56.0" prefHeight="254.0" prefWidth="575.0" AnchorPane.leftAnchor="0.0"/>

</AnchorPane>



Register.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.Button?>

<?import javafx.scene.control.Label?>

<?import javafx.scene.control.PasswordField?>

<?import javafx.scene.control.TextField?>

<?import javafx.scene.control.Tooltip?>

<?import javafx.scene.layout.AnchorPane?>



<AnchorPane prefHeight="400.0" prefWidth="400.0" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Register.RegisterController">

   <children>

      <Label fx:id="backgroundLabel" layoutX="25.0" layoutY="14.0" prefHeight="400.0" prefWidth="400.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0" />

      <Button fx:id="registerButton" layoutX="320.0" layoutY="338.0" mnemonicParsing="false" onAction="#registerUser" text="Register">

         <tooltip>

            <Tooltip text="Create customer account with current details" />

         </tooltip></Button>

      <Button fx:id="cancelButton" layoutX="14.0" layoutY="338.0" mnemonicParsing="false" onAction="#backToLogin" text="Cancel">

         <tooltip>

            <Tooltip text="Go back to login page" />

         </tooltip></Button>

      <TextField fx:id="usernameField" layoutX="192.0" layoutY="102.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter username" />

      <TextField fx:id="firstNameField" layoutX="192.0" layoutY="137.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter First name" />

      <TextField fx:id="lastNameField" layoutX="192.0" layoutY="169.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter Last name" />

      <TextField fx:id="emailField" layoutX="192.0" layoutY="203.0" prefHeight="26.0" prefWidth="160.0" promptText="someone@example.com" />

      <PasswordField fx:id="passwordField" layoutX="192.0" layoutY="238.0" prefHeight="26.0" prefWidth="160.0" promptText="Enter your password" />

      <Label layoutX="40.0" layoutY="106.0" prefWidth="62.0" text="Username" />

      <Label layoutX="41.0" layoutY="242.0" text="Password" />

      <Label layoutX="39.0" layoutY="141.0" text="First name" />

      <Label layoutX="40.0" layoutY="173.0" text="Last name" />

      <Label layoutX="53.0" layoutY="209.0" text="Email" />

      <Label fx:id="Heading" layoutX="127.0" layoutY="41.0" text="Create an account" />

      <Label fx:id="errorLabel" layoutX="113.0" layoutY="295.0" prefHeight="15.0" prefWidth="160.0" textAlignment="CENTER" />

      <PasswordField fx:id="verifyPasswordField" layoutX="192.0" layoutY="270.0" prefHeight="26.0" prefWidth="160.0" promptText="Re-enter password" />

   </children>

</AnchorPane>



Room.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.*?>

<?import javafx.scene.effect.*?>

<?import javafx.scene.image.*?>

<?import javafx.scene.layout.*?>



<AnchorPane fx:id="fullPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="454.0" prefWidth="991.0" xmlns="http://javafx.com/javafx/11.0.14-internal" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.Room.RoomController">

    <children>

        <Label fx:id="tableLabel" alignment="CENTER" layoutX="433.0" layoutY="14.0" prefHeight="23.0" prefWidth="182.0" text="Room Info" />

        <Button fx:id="bookButton" layoutX="341.0" layoutY="415.0" mnemonicParsing="false" onAction="#doAddRoom" prefHeight="32.0" prefWidth="77.0" text="commit" />

        <Button fx:id="backButton" layoutX="192.0" layoutY="415.0" mnemonicParsing="false" onAction="#backToDashboard" prefHeight="32.0" prefWidth="77.0" text="Cancel" />

        <TextArea fx:id="discribeText" layoutX="192.0" layoutY="298.0" prefHeight="85.0" prefWidth="227.0" />

        <Label alignment="CENTER_RIGHT" layoutX="19.0" layoutY="82.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Room Number:">

            <tooltip>

                <Tooltip text="Select between rooms 1-5" />

            </tooltip>

        </Label>

        <Label alignment="CENTER_RIGHT" layoutX="19.0" layoutY="341.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Room Description:">

            <tooltip>

                <Tooltip text="Room facilities and details" />

            </tooltip>

        </Label>

        <Label fx:id="errorLabel" layoutX="14.0" layoutY="389.0" prefHeight="18.0" prefWidth="322.0" />

        <TableView fx:id="myTable" layoutX="433.0" layoutY="43.0" onMouseClicked="#onclick" prefHeight="400.0" prefWidth="540.0" AnchorPane.bottomAnchor="11.0" AnchorPane.leftAnchor="433.0" AnchorPane.rightAnchor="18.0" AnchorPane.topAnchor="43.0">

            <columns>

                <TableColumn fx:id="IDColumn" prefWidth="43.0" text="ID" />

                <TableColumn fx:id="nameColumn" minWidth="0.0" prefWidth="112.39996337890625" text="Name" />

                <TableColumn fx:id="numberColumn" minWidth="0.0" prefWidth="112.39996337890625" text="number" />

                <TableColumn fx:id="pictureColumn" minWidth="0.0" prefWidth="112.39996337890625" text="picture" />

                <TableColumn fx:id="descriptionColumn" minWidth="0.0" prefWidth="268.79998779296875" text="description" />

            </columns>

            <contextMenu>

                <ContextMenu>

                    <items>

                        <MenuItem mnemonicParsing="false" onAction="#deleteRoom" text="Delete" />

                    </items>

                </ContextMenu>

            </contextMenu>

        </TableView>

        <Label fx:id="infoLabel" alignment="CENTER_RIGHT" layoutX="19.0" layoutY="191.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Meeting Pictures:" />

        <ImageView fx:id="roomImg" fitHeight="154.0" fitWidth="227.0" layoutX="192.0" layoutY="123.0" onMouseClicked="#addRoom" pickOnBounds="true" preserveRatio="true">

            <effect>

                <Blend />

            </effect>

        </ImageView>

        <Label alignment="CENTER_RIGHT" layoutX="19.0" layoutY="46.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="140.0" text="Room    Name:" />

        <TextField fx:id="nameText" layoutX="192.0" layoutY="44.0" prefHeight="26.0" prefWidth="227.0" />

        <TextField fx:id="numberText" layoutX="192.0" layoutY="80.0" prefHeight="26.0" prefWidth="227.0" />

    </children>

</AnchorPane>



RoomBooker.fxml
<?xml version="1.0" encoding="UTF-8"?>



<?import javafx.scene.control.*?>

<?import javafx.scene.layout.*?>



<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="720.0" prefWidth="745.0" xmlns="http://javafx.com/javafx/11.0.14-internal" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.RoomBooker.RoomBookerController">

   <children>

      <Label fx:id="tableLabel" alignment="CENTER" layoutX="458.0" layoutY="21.0" prefHeight="23.0" prefWidth="182.0" text="Available Times" />

      <DatePicker fx:id="datePicker" editable="false" layoutX="168.0" layoutY="210.0" prefHeight="26.0" prefWidth="227.0" />

      <TextArea fx:id="refreshmentsArea" layoutX="168.0" layoutY="385.0" prefHeight="85.0" prefWidth="227.0" promptText="e.g. Juice, biscuits ..." />

      <TextField fx:id="refreshmentsTimeBox" layoutX="168.0" layoutY="488.0" prefHeight="26.0" prefWidth="227.0" promptText="e.g. 00:30, 16:30, 18:00 ..." />

      <TextField fx:id="resourcesTextField" layoutX="170.0" layoutY="347.0" prefHeight="26.0" prefWidth="227.0" promptText="comma with space list. e.g. pen, pencil ..." />

      <Label layoutX="49.0" layoutY="214.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Select a date">

         <tooltip>

            <Tooltip text="Date of booking" />

         </tooltip></Label>

      <Label layoutX="63.0" layoutY="258.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Start time">

         <tooltip>

            <Tooltip text="Booking start time" />

         </tooltip></Label>

      <Label layoutX="65.0" layoutY="304.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="End Time">

         <tooltip>

            <Tooltip text="Booking end time" />

         </tooltip></Label>

      <Label layoutX="61.0" layoutY="351.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Resources">

         <tooltip>

            <Tooltip text="List of requested resources" />

         </tooltip></Label>

      <Label layoutX="40.0" layoutY="398.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Refreshments" />

      <Label layoutX="16.0" layoutY="492.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Refreshments time">

         <tooltip>

            <Tooltip text="Comma separated time values. e.g 12:30, 13:30" />

         </tooltip></Label>

      <Button fx:id="bookButton" layoutX="321.0" layoutY="625.0" mnemonicParsing="false" onAction="#bookRoom" prefHeight="32.0" prefWidth="77.0" text="Book" />

      <Button fx:id="backButton" layoutX="164.0" layoutY="629.0" mnemonicParsing="false" onAction="#backToDashboard" text="Cancel" />

      <TextArea fx:id="roomDescriptionBox" editable="false" layoutX="168.0" layoutY="114.0" prefHeight="85.0" prefWidth="227.0" />

      <Label layoutX="29.0" layoutY="82.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="150.0" text="Room Number">

         <tooltip>

            <Tooltip text="Select between rooms 1-5" />

         </tooltip></Label>

      <Label layoutX="19.0" layoutY="148.0" maxHeight="18.0" maxWidth="150.0" minHeight="18.0" minWidth="150.0" prefHeight="18.0" prefWidth="106.0" text="Room Description">

         <tooltip>

            <Tooltip text="Room facilities and details" />

         </tooltip></Label>

      <Label fx:id="errorLabel" layoutX="24.0" layoutY="533.0" prefHeight="18.0" prefWidth="322.0" />

      <Button fx:id="refreshButton" layoutX="507.0" layoutY="676.0" mnemonicParsing="false" onAction="#setTableView" prefHeight="26.0" prefWidth="84.0" text="Refresh Times" />

      <ComboBox fx:id="startTimeHour" layoutX="171.0" layoutY="255.0" prefHeight="28.0" prefWidth="94.0" promptText="Hour" />

      <ComboBox fx:id="startTimeMin" layoutX="306.0" layoutY="255.0" prefHeight="29.0" prefWidth="87.0" promptText="Min" />

      <ComboBox fx:id="endTimeHour" layoutX="171.0" layoutY="299.0" prefHeight="28.0" prefWidth="94.0" promptText="Hour" />

      <ComboBox fx:id="endTimeMin" layoutX="306.0" layoutY="298.0" prefHeight="29.0" prefWidth="87.0" promptText="Min" />

      <TableView fx:id="myTable" layoutX="428.0" layoutY="55.0" prefHeight="610.0" prefWidth="301.0" AnchorPane.bottomAnchor="55.0" AnchorPane.leftAnchor="428.0" AnchorPane.rightAnchor="-9.0" AnchorPane.topAnchor="55.0">

        <columns>

          <TableColumn fx:id="startTimeColumn" prefWidth="150.0" text="Time start" />

            <TableColumn fx:id="endTimeColumn" minWidth="0.0" prefWidth="150.0" text="Time end" />

        </columns>

      </TableView>

      <Label fx:id="infoLabel" layoutX="18.0" layoutY="551.0" prefHeight="57.0" prefWidth="322.0" />

      <ComboBox fx:id="numberBox" layoutX="167.0" layoutY="78.0" prefHeight="26.0" prefWidth="227.0" />

   </children>

</AnchorPane>
